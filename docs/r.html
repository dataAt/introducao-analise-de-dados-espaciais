<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title></title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introdução.html"/>
<link rel="next" href="python.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introdução.html"><a href="introdução.html"><i class="fa fa-check"></i><b>1</b> Introdução 🌍</a><ul>
<li class="chapter" data-level="1.1" data-path="introdução.html"><a href="introdução.html#representações-de-dados-espaciais"><i class="fa fa-check"></i><b>1.1</b> Representações de dados espaciais</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introdução.html"><a href="introdução.html#vetoriais"><i class="fa fa-check"></i><b>1.1.1</b> Vetoriais</a></li>
<li class="chapter" data-level="1.1.2" data-path="introdução.html"><a href="introdução.html#matriciais"><i class="fa fa-check"></i><b>1.1.2</b> Matriciais</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introdução.html"><a href="introdução.html#sistema-de-referência-espacial"><i class="fa fa-check"></i><b>1.2</b> Sistema de referência espacial</a></li>
<li class="chapter" data-level="1.3" data-path="introdução.html"><a href="introdução.html#projeções-cartográficas"><i class="fa fa-check"></i><b>1.3</b> Projeções cartográficas</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introdução.html"><a href="introdução.html#tipos-de-projeção"><i class="fa fa-check"></i><b>1.3.1</b> Tipos de projeção</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introdução.html"><a href="introdução.html#sistema-de-coordenadas"><i class="fa fa-check"></i><b>1.4</b> Sistema de Coordenadas</a><ul>
<li class="chapter" data-level="1.4.1" data-path="introdução.html"><a href="introdução.html#sistemas-de-coordenadas-geográficas"><i class="fa fa-check"></i><b>1.4.1</b> Sistemas de Coordenadas Geográficas</a></li>
<li class="chapter" data-level="1.4.2" data-path="introdução.html"><a href="introdução.html#coordenadas-planas"><i class="fa fa-check"></i><b>1.4.2</b> Coordenadas planas</a></li>
<li class="chapter" data-level="1.4.3" data-path="introdução.html"><a href="introdução.html#códigos-epsg"><i class="fa fa-check"></i><b>1.4.3</b> Códigos EPSG</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introdução.html"><a href="introdução.html#open-geospatial-consortium-ogc"><i class="fa fa-check"></i><b>1.5</b> Open Geospatial Consortium (OGC)</a></li>
<li class="chapter" data-level="1.6" data-path="introdução.html"><a href="introdução.html#relacionamentos-espaciais-nomeados"><i class="fa fa-check"></i><b>1.6</b> Relacionamentos espaciais nomeados</a><ul>
<li class="chapter" data-level="1.6.1" data-path="introdução.html"><a href="introdução.html#relacionamentos-espaciais"><i class="fa fa-check"></i><b>1.6.1</b> Relacionamentos espaciais</a></li>
<li class="chapter" data-level="1.6.2" data-path="introdução.html"><a href="introdução.html#restrições-espaciais"><i class="fa fa-check"></i><b>1.6.2</b> Restrições espaciais</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introdução.html"><a href="introdução.html#matriz-de-9-interseções-estendida-dimensionalmente"><i class="fa fa-check"></i><b>1.7</b> Matriz de 9-Interseções Estendida dimensionalmente</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r.html"><a href="r.html"><i class="fa fa-check"></i><b>2</b> R 💎</a><ul>
<li class="chapter" data-level="2.1" data-path="r.html"><a href="r.html#tibble"><i class="fa fa-check"></i><b>2.1</b> Tibble</a><ul>
<li class="chapter" data-level="2.1.1" data-path="r.html"><a href="r.html#tidyverse"><i class="fa fa-check"></i><b>2.1.1</b> Tidyverse</a></li>
<li class="chapter" data-level="2.1.2" data-path="r.html"><a href="r.html#manipulação-de-dados"><i class="fa fa-check"></i><b>2.1.2</b> Manipulação de dados</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r.html"><a href="r.html#sf"><i class="fa fa-check"></i><b>2.2</b> SF</a><ul>
<li class="chapter" data-level="2.2.1" data-path="r.html"><a href="r.html#tipos-geométricos"><i class="fa fa-check"></i><b>2.2.1</b> Tipos Geométricos</a></li>
<li class="chapter" data-level="2.2.2" data-path="r.html"><a href="r.html#leitura-e-escrita-de-dados-vetoriais"><i class="fa fa-check"></i><b>2.2.2</b> Leitura e escrita de dados vetoriais</a></li>
<li class="chapter" data-level="2.2.3" data-path="r.html"><a href="r.html#relacionamentos-espaciais-1"><i class="fa fa-check"></i><b>2.2.3</b> Relacionamentos Espaciais</a></li>
<li class="chapter" data-level="2.2.4" data-path="r.html"><a href="r.html#operadores-métricos"><i class="fa fa-check"></i><b>2.2.4</b> Operadores Métricos</a></li>
<li class="chapter" data-level="2.2.5" data-path="r.html"><a href="r.html#sistemas-de-referências"><i class="fa fa-check"></i><b>2.2.5</b> Sistemas de referências</a></li>
<li class="chapter" data-level="2.2.6" data-path="r.html"><a href="r.html#materiais-recomendados"><i class="fa fa-check"></i><b>2.2.6</b> Materiais recomendados</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="python.html"><a href="python.html"><i class="fa fa-check"></i><b>3</b> Python ✨</a><ul>
<li class="chapter" data-level="3.1" data-path="python.html"><a href="python.html#pandas"><i class="fa fa-check"></i><b>3.1</b> Pandas 🐼</a><ul>
<li class="chapter" data-level="3.1.1" data-path="python.html"><a href="python.html#manipulação-de-dados-1"><i class="fa fa-check"></i><b>3.1.1</b> Manipulação de dados</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="python.html"><a href="python.html#geopandas"><i class="fa fa-check"></i><b>3.2</b> GeoPandas 🌐🐼</a><ul>
<li class="chapter" data-level="3.2.1" data-path="python.html"><a href="python.html#geoseries-e-geodataframes"><i class="fa fa-check"></i><b>3.2.1</b> GeoSeries e GeoDataFrames</a></li>
<li class="chapter" data-level="3.2.2" data-path="python.html"><a href="python.html#leitura-e-escrita-de-dados-1"><i class="fa fa-check"></i><b>3.2.2</b> Leitura e escrita de dados</a></li>
<li class="chapter" data-level="3.2.3" data-path="python.html"><a href="python.html#manipulação-geométrica"><i class="fa fa-check"></i><b>3.2.3</b> Manipulação geométrica</a></li>
<li class="chapter" data-level="3.2.4" data-path="python.html"><a href="python.html#seleção-e-filtro-de-dados"><i class="fa fa-check"></i><b>3.2.4</b> Seleção e filtro de dados</a></li>
<li class="chapter" data-level="3.2.5" data-path="python.html"><a href="python.html#manipulação-de-projeções"><i class="fa fa-check"></i><b>3.2.5</b> Manipulação de projeções</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="introdução-ao-postgis.html"><a href="introdução-ao-postgis.html"><i class="fa fa-check"></i><b>4</b> Introdução ao postgis 🐘</a><ul>
<li class="chapter" data-level="4.1" data-path="introdução-ao-postgis.html"><a href="introdução-ao-postgis.html#instalação"><i class="fa fa-check"></i><b>4.1</b> Instalação</a></li>
<li class="chapter" data-level="4.2" data-path="introdução-ao-postgis.html"><a href="introdução-ao-postgis.html#um-pouco-de-sql"><i class="fa fa-check"></i><b>4.2</b> Um pouco de SQL</a><ul>
<li class="chapter" data-level="4.2.1" data-path="introdução-ao-postgis.html"><a href="introdução-ao-postgis.html#acessando-a-interface-postgresql"><i class="fa fa-check"></i><b>4.2.1</b> Acessando a interface PostgreSQL</a></li>
<li class="chapter" data-level="4.2.2" data-path="introdução-ao-postgis.html"><a href="introdução-ao-postgis.html#criando-uma-nova-base-de-dados"><i class="fa fa-check"></i><b>4.2.2</b> Criando uma nova base de dados</a></li>
<li class="chapter" data-level="4.2.3" data-path="introdução-ao-postgis.html"><a href="introdução-ao-postgis.html#well-known-text"><i class="fa fa-check"></i><b>4.2.3</b> Well-known text</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="introdução-ao-postgis.html"><a href="introdução-ao-postgis.html#funções-geométricas"><i class="fa fa-check"></i><b>4.3</b> Funções geométricas</a></li>
<li class="chapter" data-level="4.4" data-path="introdução-ao-postgis.html"><a href="introdução-ao-postgis.html#relacionamentos-espaciais-2"><i class="fa fa-check"></i><b>4.4</b> Relacionamentos espaciais</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="para-saber-mais.html"><a href="para-saber-mais.html"><i class="fa fa-check"></i><b>5</b> Para saber mais 🔭</a><ul>
<li class="chapter" data-level="5.1" data-path="para-saber-mais.html"><a href="para-saber-mais.html#impactos-da-resolução-espacial-de-modelos-digitais-de-superfície-no-cálculo-da-perda-de-solo-através-da-eups-em-ambiente-urbano"><i class="fa fa-check"></i><b>5.1</b> <strong>IMPACTOS DA RESOLUÇÃO ESPACIAL DE MODELOS DIGITAIS DE SUPERFÍCIE NO CÁLCULO DA PERDA DE SOLO ATRAVÉS DA EUPS EM AMBIENTE URBANO</strong></a></li>
<li class="chapter" data-level="5.2" data-path="para-saber-mais.html"><a href="para-saber-mais.html#criação-e-avaliação-de-mapas-de-suscetibilidade-a-inundação-para-o-município-de-iguape-estado-de-são-paulo"><i class="fa fa-check"></i><b>5.2</b> <strong>CRIAÇÃO E AVALIAÇÃO DE MAPAS DE SUSCETIBILIDADE A INUNDAÇÃO PARA O MUNICÍPIO DE IGUAPE, ESTADO DE SÃO PAULO</strong></a></li>
<li class="chapter" data-level="5.3" data-path="para-saber-mais.html"><a href="para-saber-mais.html#conectividade-demográfica-e-aclimatação-de-peixes-recifais-do-gênero-sparisoma-em-cenário-de-mudanças-climáticas"><i class="fa fa-check"></i><b>5.3</b> <strong>CONECTIVIDADE DEMOGRÁFICA E ACLIMATAÇÃO DE PEIXES RECIFAIS DO GÊNERO SPARISOMA EM CENÁRIO DE MUDANÇAS CLIMÁTICAS</strong></a></li>
<li class="chapter" data-level="5.4" data-path="para-saber-mais.html"><a href="para-saber-mais.html#parametrização-de-algoritmos-empíricos-e-algoritmo-quasi-analítico-qaa-para-estimativa-de-clorofila-a-em-lagos-da-várzea-do-rio-amazonas"><i class="fa fa-check"></i><b>5.4</b> <strong>PARAMETRIZAÇÃO DE ALGORITMOS EMPÍRICOS E ALGORITMO QUASI-ANALÍTICO QAA PARA ESTIMATIVA DE CLOROFILA-A EM LAGOS DA VÁRZEA DO RIO AMAZONAS</strong></a></li>
<li class="chapter" data-level="5.5" data-path="para-saber-mais.html"><a href="para-saber-mais.html#quantificação-remota-da-concentração-de-sólidos-totais-e-inorgânicos-em-suspensão-em-lagos-da-planície-de-inundação-do-baixo-amazonas---uma-abordagem-multi-sensor"><i class="fa fa-check"></i><b>5.5</b> <strong>QUANTIFICAÇÃO REMOTA DA CONCENTRAÇÃO DE SÓLIDOS TOTAIS E INORGÂNICOS EM SUSPENSÃO EM LAGOS DA PLANÍCIE DE INUNDAÇÃO DO BAIXO AMAZONAS - UMA ABORDAGEM MULTI-SENSOR</strong></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>6</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r" class="section level1">
<h1><span class="header-section-number">2</span> R 💎</h1>
<p><strong>R</strong> é uma linguagem de programação de alto nível voltada para visualização e análise de dados. Com base na linguagem de programação <strong>S </strong> foi criada pelos estatísticos <strong>R</strong>oss Ihaka e <strong>R</strong>obert Gentleman no departamento de estatística da universidade de Auckland na Nova Zelândia. A linguagem R é mantida pelo grupo <strong>R Core Team</strong>.</p>
<p>O artigo publicado pela <span class="citation">Tippmann (2015)</span>, mostra a crescente adesão do uso da linguagem R em diferentes áreas cientificas. A Figura <a href="r.html#fig:fig1">2.1</a> evidência o crescimento mencionado anteriomente.</p>
<div class="figure" style="text-align: center"><span id="fig:fig1"></span>
<img src="res/2_r/r_articles.png" alt="Série temporal de citações dos pacotes feitos em R - Fonte: @tippmann2015programming" width="50%" />
<p class="caption">
Figure 2.1: Série temporal de citações dos pacotes feitos em R - Fonte: <span class="citation">Tippmann (2015)</span>
</p>
</div>
<p>Como apresentado no capítulo anterior, o objetivo desta seção é apresentar o uso da linguagem de programação R para análise de dados espaciais, os quais compõem a ciência da geoinformação.</p>
<div id="tibble" class="section level2">
<h2><span class="header-section-number">2.1</span> Tibble</h2>
<p>As estruturas de dados (ED’s) do pacote <em>base</em> do R, por exemplo, <code>data.frame</code> e <code>matrix</code>, oferecem diversos métodos de adição, manipulação e exclusão de dados. No entanto, tais métodos possuem certas limitações impostas pela linguagem, para adicionar quaisquer mudanças nesses métodos é necessário editar o código-fonte dos mesmos. Com o objetivo de abstrair as complexidades e o alta verbosidade das estruturas de dados tradicionais, a comunidade cria diversos pacotes que buscam a integração e a fácil manipulação dos mesmos.</p>
<p>Neste minicurso, optamos por usar o pacote <code>tibble</code> do que o método <code>data.frame</code> oferecido pelo pacote <code>base</code>. No entanto, vamos usar o termo <strong>Data frame</strong> como estrutura de dados, a qual é implementada pelo pacote <code>tibble</code>.</p>
<div class="figure" style="text-align: center"><span id="fig:fig2"></span>
<img src="res/2_r/vec_matriz.png" alt="Estrutura de dados: Vetor e Matriz" width="50%" />
<p class="caption">
Figure 2.2: Estrutura de dados: Vetor e Matriz
</p>
</div>
<p>Podemos definir <strong>Data frame</strong> como uma matriz (Figura <a href="r.html#fig:fig2">2.2</a>), composta por linhas e colunas, cujas colunas representam as variáveis (atributos) e as linhas representam observações. A Figura <a href="r.html#fig:fig3">2.3</a> apresenta um <strong>Data frame</strong>, a qual é possível observar as definições mencionadas anteriormente, desta forma, sabemos que o aluno <strong>José</strong> obteve <strong>7.2</strong> na disciplina de Álgebra Linear.</p>
<div class="figure" style="text-align: center"><span id="fig:fig3"></span>
<img src="res/2_r/df_definicao.png" alt=" Representação de um Data frame - Fonte: @gk4gk2019" width="80%" />
<p class="caption">
Figure 2.3:  Representação de um Data frame - Fonte: <span class="citation">GeeksforGeeks (2018)</span>
</p>
</div>
<p>O trecho de código a seguir apresenta a implementação do <strong>Data frame</strong> apresentado anteriormente.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Importação do pacote </span>
  <span class="kw">library</span>(tibble)  
  
  <span class="co"># Criação do tibble</span>
  df_escola &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">Aluno =</span> <span class="kw">c</span>(<span class="st">&quot;José&quot;</span>, <span class="st">&quot;Maria&quot;</span>, <span class="st">&quot;Ana&quot;</span>, <span class="st">&quot;Carlos&quot;</span>),
                              <span class="st">`</span><span class="dt">Álgebra Linear</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">7</span>),
                              <span class="st">`</span><span class="dt">Cálculo I</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">5</span>),
                              <span class="st">`</span><span class="dt">Eng. Software</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">9</span>, <span class="dv">5</span>, <span class="dv">9</span>),
                              <span class="st">`</span><span class="dt">PAD</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">9</span>))
    
  <span class="co"># Visualização dos dados </span>
  df_escola</code></pre></div>
<pre><code>## # A tibble: 4 x 5
##   Aluno  `Álgebra Linear` `Cálculo I` `Eng. Software`   PAD
##   &lt;chr&gt;             &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1 José                  7           8              10     5
## 2 Maria                10           9               9     7
## 3 Ana                   8          10               5     4
## 4 Carlos                7           5               9     9</code></pre>
<p>O pacote <code>tibble</code> possui diversas vantagens em relação ao tradicional <code>data.frame</code>, por exemplo, ainda no <code>tibble</code> criado anteriormente, é possível observar os tipos de cada atributo. Com o objetivo de facilitar a etapa de análise de dados, o pacote <code>tibble</code> não faz a conversão de atributos do tipo <code>character</code> para <code>factor</code> de forma automática.</p>
<p>Outra grande vantagem do <code>tibble</code> é a interação com os métodos criados para o <code>data.frame</code>, esses provindos do pacote <code>base</code>, por exemplo, o método <code>mean()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">mean</span>(df_escola<span class="op">$</span><span class="st">`</span><span class="dt">Cálculo I</span><span class="st">`</span>)</code></pre></div>
<pre><code>## [1] 8</code></pre>
<p>Desta forma, podemos usar quaisquer métodos criados para uso no <code>data.frame</code> no <code>tibble</code>. O código a seguir mostra que o <code>tibble</code> criado possui três classes: <code>tbl_df</code>, <code>tbl</code> e <code>data.frame</code>. É possível observar que o <code>tibble</code> possui como classe comum o <code>data.frame</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">class</span>(df_escola)</code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>Na subseção subsequente, vamos explicar com detalhes como realizar a leitura, escrita e manipulação de dados.</p>
<div id="tidyverse" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Tidyverse</h3>
<p>Com o intuito de desenvolver um conjunto de ferramentas para realizar a leitura, escrita, manipulação e visualização de dados, o estatístico <span class="citation">Wickham (2017)</span> e seus colaboradores criaram o <a href="https://www.tidyverse.org/">Tidyverse</a>, o qual é apresentado na Figura abaixo ao lado esquerdo. Ao lado direito, é apresentado as etapas de um projeto de ciência de dados com aplicação no mundo real <span class="citation">Schutt and OŃeil (2013)</span>.</p>
<div class="figure" style="text-align: center"><span id="fig:fig4"></span>
<img src="res/2_r/ds_process_2.png" alt="Conjunto de pacotes do kit de ferramentas e etapas de um projeto de ciência de dados" width="150%" />
<p class="caption">
Figure 2.4: Conjunto de pacotes do kit de ferramentas e etapas de um projeto de ciência de dados
</p>
</div>
<p>Neste minicurso, vamos usar os pacotes <code>readr</code>, <code>tibble</code>, <code>dplyr</code>, <code>magrittr</code> e <code>ggplot2</code>. O pacote <code>readr</code> é utilizado para fazer leitura e escrita de dados. As próximas subseções descrevem com detalhes os pacotes citados.</p>
<div id="leitura-e-escrita-de-dados" class="section level4">
<h4><span class="header-section-number">2.1.1.1</span> Leitura e escrita de dados</h4>
<blockquote>
<p>No minicurso de <a href="https://dataat.github.io/introducao-analise-de-dados/introducao.html#dados">Introdução à análise de dados</a>, explicamos com detalhes a diferença entre cada formato de dados e suas respectivas aplicações.</p>
</blockquote>
<p>Nesta subseção, vamos criar um conjunto de dados, da seguinte forma:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">   <span class="co"># Criação do tibble</span>
  df_solo &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">label =</span> <span class="kw">c</span>(<span class="st">&quot;Soja&quot;</span>, <span class="st">&quot;Milho&quot;</span>, <span class="st">&quot;Pastagem&quot;</span>, <span class="st">&quot;Vegetação&quot;</span>),
                              <span class="dt">plant_agri =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>),
                              <span class="dt">plat_col =</span> <span class="kw">c</span>(<span class="st">&quot;2019-09-01&quot;</span>, <span class="st">&quot;2019-01-10&quot;</span>, <span class="st">&quot;NA&quot;</span>, <span class="st">&quot;NA&quot;</span>))
  
  
  <span class="co"># Visualização das observações iniciais do conjunto de dados</span>
  <span class="kw">head</span>(df_solo, <span class="dv">2</span>)</code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   label plant_agri plat_col  
##   &lt;chr&gt; &lt;lgl&gt;      &lt;chr&gt;     
## 1 Soja  TRUE       2019-09-01
## 2 Milho TRUE       2019-01-10</code></pre>
<p>Podemos salvar os dados em diferentes formatos, sendo eles tabulares ou não. Para salvar os dados no formato <code>json</code>, pode ser feito desta forma:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Importação do pacote </span>
  <span class="kw">library</span>(jsonlite)</code></pre></div>
<pre><code>## Loading required package: methods</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Transformando o tibble em json</span>
  df_solo_json &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">toJSON</span>(df_solo, <span class="dt">pretty =</span> <span class="ot">TRUE</span>)
  
  <span class="co"># Visualização do json</span>
  df_solo_json</code></pre></div>
<pre><code>## [
##   {
##     &quot;label&quot;: &quot;Soja&quot;,
##     &quot;plant_agri&quot;: true,
##     &quot;plat_col&quot;: &quot;2019-09-01&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Milho&quot;,
##     &quot;plant_agri&quot;: true,
##     &quot;plat_col&quot;: &quot;2019-01-10&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Pastagem&quot;,
##     &quot;plant_agri&quot;: false,
##     &quot;plat_col&quot;: &quot;NA&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Vegetação&quot;,
##     &quot;plant_agri&quot;: false,
##     &quot;plat_col&quot;: &quot;NA&quot;
##   }
## ]</code></pre>
<p>Agora que o nosso dado está em <code>json</code>, podemos salvá-lo, da seguinte maneira:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Escrita dos dados em formato json no arquivo dados_do_solo.json</span>
  jsonlite<span class="op">::</span><span class="kw">write_json</span>(df_solo_json, <span class="st">&quot;../data/5_arquivos_parte_r/dados_do_solo.json&quot;</span>)</code></pre></div>
<p>Para realizar a leitura:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Leitura do arquivo em formato .json</span>
  df_solo &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">read_json</span>(<span class="st">&quot;../data/5_arquivos_parte_r/dados_do_solo.json&quot;</span>, <span class="dt">simplifyVector =</span> <span class="ot">TRUE</span>)
  
  <span class="co"># Visualização dos dados</span>
  <span class="kw">cat</span>(df_solo)</code></pre></div>
<pre><code>## [
##   {
##     &quot;label&quot;: &quot;Soja&quot;,
##     &quot;plant_agri&quot;: true,
##     &quot;plat_col&quot;: &quot;2019-09-01&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Milho&quot;,
##     &quot;plant_agri&quot;: true,
##     &quot;plat_col&quot;: &quot;2019-01-10&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Pastagem&quot;,
##     &quot;plant_agri&quot;: false,
##     &quot;plat_col&quot;: &quot;NA&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Vegetação&quot;,
##     &quot;plant_agri&quot;: false,
##     &quot;plat_col&quot;: &quot;NA&quot;
##   }
## ]</code></pre>
<p>De forma semelhante a leitura e escrita do arquivo em formato <code>json</code>, podemos salvar nossos dados de solo em formato tabular, porém, vamos usar o pacote <code>readr</code>, da seguinte forma:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Importação do pacote </span>
  <span class="kw">library</span>(readr)

  <span class="co"># Escrita dos dados em formato csv no arquivo dados_do_solo.csv</span>
  readr<span class="op">::</span><span class="kw">write_csv</span>(df_solo, <span class="st">&quot;../data/5_arquivos_parte_r/dados_do_solo.csv&quot;</span>)</code></pre></div>
<p>Para fazer a leitura:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Leitura do arquivo em formato .csv</span>
  df_solo_csv &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;../data/5_arquivos_parte_r/dados_do_solo.csv&quot;</span>)</code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   label = col_character(),
##   plant_agri = col_logical(),
##   plat_col = col_date(format = &quot;&quot;)
## )</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Visualização do conjunto de dados</span>
  df_solo_csv</code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   label     plant_agri plat_col  
##   &lt;chr&gt;     &lt;lgl&gt;      &lt;date&gt;    
## 1 Soja      TRUE       2019-09-01
## 2 Milho     TRUE       2019-01-10
## 3 Pastagem  FALSE      NA        
## 4 Vegetação FALSE      NA</code></pre>
<p>No entanto, nem tudo são flores e tão simples quanto mostramos. Os métodos apresentados possuem diversos parâmetros que ajudam a lidar com dados mal formatados e ruidosos, então, salientamos que nosso exemplo é de cunho acadêmico. Como diz um dos criadores do <em>Tidyverse</em>:</p>
<blockquote>
<p>“Os conjuntos de dados arrumados são todos iguais, mas todos os conjuntos de dados desorganizados são desorganizados à sua própria maneira.” - Hadley Wickham</p>
</blockquote>
</div>
</div>
<div id="manipulação-de-dados" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Manipulação de dados</h3>
<p>Nesta subseção, vamos nos basear no nosso livro-texto de <a href="https://dataat.github.io/introducao-analise-de-dados/introducao-ao-r.html#manipulacao-de-dados">Introdução à Análise de Dados</a>, fique à vontade para contribuir com o material deste curso 😞.</p>
<p>Para selecionar, filtrar e agrupar nossos dados, vamos usar o pacote <code>dplyr</code>, o qual está contido no kit de ferramentas <code>Tidyverse</code>. Vamos iniciar criando mais um conjunto de dados:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação do tibble</span>
  df_escola &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(
    <span class="dt">id =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),
    <span class="dt">curso =</span> <span class="kw">c</span>(<span class="st">&quot;Historia&quot;</span>, <span class="st">&quot;Historia&quot;</span>, <span class="st">&quot;Matemática&quot;</span>,
                    <span class="st">&quot;Estatística&quot;</span>, <span class="st">&quot;Matemática&quot;</span>, <span class="st">&quot;Estatística&quot;</span>),
    <span class="dt">media =</span> <span class="kw">c</span>(<span class="fl">2.1</span>, <span class="fl">3.5</span>, <span class="fl">4.0</span>, <span class="fl">1.0</span>, <span class="ot">NA</span>, <span class="fl">4.9</span>),
    <span class="dt">conceito =</span> <span class="kw">c</span>(<span class="st">&quot;C&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>,
                        <span class="st">&quot;C&quot;</span>, <span class="st">&quot;NA&quot;</span>, <span class="st">&quot;A&quot;</span>))

  knitr<span class="op">::</span><span class="kw">kable</span>(df_escola)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">curso</th>
<th align="right">media</th>
<th align="left">conceito</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Historia</td>
<td align="right">2.1</td>
<td align="left">C</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Historia</td>
<td align="right">3.5</td>
<td align="left">B</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Matemática</td>
<td align="right">4.0</td>
<td align="left">A</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Estatística</td>
<td align="right">1.0</td>
<td align="left">C</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Matemática</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Estatística</td>
<td align="right">4.9</td>
<td align="left">A</td>
</tr>
</tbody>
</table>
<p>Entre os diversos métodos oferecidos pelo pacote <code>dplyr</code>, vamos usar os seguintes:</p>
<ul>
<li><code>select</code> - Seleção de atributos de um <strong>data.frame</strong> ou <strong>tibble</strong></li>
<li><code>filter</code> - Filtro de observações de acordo com uma lógica pré-definida</li>
<li><code>mutate</code> - Criação de novos atributos</li>
<li><code>group_by</code> - Criação de grupos para aplicação de funções de agregação</li>
<li><code>summarize</code> - Função de agregação aplicada em grupos</li>
</ul>
<p>Vamos manipular nosso <code>tibble</code> com base nos métodos apresentados:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># importação do pacote dplyr</span>
  <span class="kw">suppressMessages</span>(<span class="kw">library</span>(dplyr))
  
  <span class="co"># Filtro dos alunos com conceito igual a &quot;A&quot;</span>
  filtro &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(df_escola, df_escola<span class="op">$</span>conceito <span class="op">==</span><span class="st"> &quot;A&quot;</span>)
   
  <span class="co"># Seleção dos atributos &quot;curso&quot;, &quot;conceito&quot; e &quot;media&quot;</span>
  selecao &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(filtro, curso, conceito, media)
    
  <span class="co"># Criação de grupos por curso</span>
  grupo &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(selecao, curso)
   
  <span class="co"># Agregação dos cursos pela média</span>
  media &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(grupo, <span class="dt">media_grupo =</span> <span class="kw">mean</span>(media))
    
  <span class="co"># Visualização dos dados</span>
  knitr<span class="op">::</span><span class="kw">kable</span>(media)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">curso</th>
<th align="right">media_grupo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Estatística</td>
<td align="right">4.9</td>
</tr>
<tr class="even">
<td align="left">Matemática</td>
<td align="right">4.0</td>
</tr>
</tbody>
</table>
<p>Basicamente, filtramos pelo atributo <code>conceito</code>, selecionamos os atributos <code>curso</code>, <code>conceito</code> e <code>media</code>, agrupamos pelos cursos e tiramos a média dos grupos formados 🐻. Mas, ficou muito grande, podemos diminuir a quantidade de atribuições utilizando <code>pipe</code>, desta forma:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># importação do pacote magrittr</span>
  <span class="kw">library</span>(magrittr)
  
  <span class="co"># Uso do pipe (%&gt;%) para filtrar, selecionar, agrupar e aplicar função de </span>
  <span class="co"># agregação</span>
  df &lt;-<span class="st"> </span>df_escola <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(conceito <span class="op">==</span><span class="st"> &quot;A&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">select</span>(curso, conceito, media) <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(curso) <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(<span class="dt">media_grupo =</span> <span class="kw">mean</span>(media))
  
  <span class="co"># Visualização dos dados</span>
  knitr<span class="op">::</span><span class="kw">kable</span>(df)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">curso</th>
<th align="right">media_grupo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Estatística</td>
<td align="right">4.9</td>
</tr>
<tr class="even">
<td align="left">Matemática</td>
<td align="right">4.0</td>
</tr>
</tbody>
</table>
<p>A principal função do <strong>pipe</strong> é tornar o código mais limpo e reprodutível. Desta forma, encerramos os métodos básicos de manipulação de dados. Na próxima subseção, vamos usar o pacote <code>sf</code> para a leitura, escrita e manipulação de dados espaciais. # Introdução à Geociências 🌏</p>
</div>
</div>
<div id="sf" class="section level2">
<h2><span class="header-section-number">2.2</span> SF</h2>
<p>O pacote <code>sf</code> <span class="citation">Pebesma (2018)</span> implementa as <code>simple features</code> explicadas no <a href="">capítulo 1</a> com base nas estruturas de <code>data.frame</code> ou <code>tibble</code>, as principais características do pacote pode ser vista na lista abaixo: - Representação nativa em R de todos os 17 tipos das <code>simple features</code> para todas as dimensões (XY, XYZ, XYM, XYZM). - Interface para o GEOS que suporta a DE9-IM. - Interface para o <a href="https://gdal.org/">GDAL</a>, a qual fornece suporte para todas opções de drivers, tipo de atributo <code>Date</code> e <code>DateTime</code> e sistema de coordenadas de referência através do <a href="https://proj.org/">PROJ</a>. - Uso de serializações escritas em Rcpp para otimizar o I/O com GDAL e GEOS. - Leitura e escrita de bancos de dados com extensões espaciais, por exemplo <a href="https://postgis.net/">PostGIS</a>.</p>
<blockquote>
<p>Lista retirada da <a href="https://r-spatial.github.io/sf/">página</a> de documentação do pacote <code>sf</code></p>
</blockquote>
<div id="tipos-geométricos" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Tipos Geométricos</h3>
<p>Como apresentado no capítulo 1, podemos representar os tipos geométricos com pontos, linhas e polígonos. Nesta subseção, vamos apresentar alguns tipos geométricos oferecidos pelo pacote <code>sf</code> que segue a implementação padrão da OGC. Para criarmos um simples <code>POINT</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Impotação do pacote</span>
  <span class="kw">library</span>(sf)</code></pre></div>
<pre><code>## Linking to GEOS 3.6.2, GDAL 2.2.3, PROJ 4.9.3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação de um ponto no plano</span>
  ponto &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>))
  
  ponto</code></pre></div>
<pre><code>## POINT (3 4)</code></pre>
<p>Para criarmos uma <code>LINESTRING</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação dos segmentos de reta</span>
  linha &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">8</span>, <span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">2</span>) )

  <span class="co"># Criação do linestring</span>
  linestring &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(linha)
  
  linestring</code></pre></div>
<pre><code>## LINESTRING (2 1, 4 4, 8 2, 4 2)</code></pre>
<p>Por fim, para criarmos um polígono sem buracos:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação dos segmentos de reta</span>
  poligono &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))

  <span class="co"># Criação do poligono</span>
  polygon &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono))

  polygon</code></pre></div>
<pre><code>## POLYGON ((2 1, 1 2, 1 5, 5 3, 2 1))</code></pre>
<p>Os tipos geométricos criados são apresentados abaixo:</p>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>Como apresentado no capítulo 1, os tipos geométricos podem ser usados em conjunto: <code>MULTIPOINT</code>, <code>MULTILINESTRING</code>, <code>MULTIPOLYGON</code> e <code>GEOMETRYCOLLECTION</code>. O trecho de código abaixo apresenta a criação dos tipos mencionados:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação de pontos</span>
  pontos &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>))

  <span class="co"># Criação do tipo geométrico multipoint</span>
  multipoint &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_multipoint</span>(pontos)
  
  <span class="co"># Criação dos segmentos de reta</span>
  linhas_s1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))
  linhas_s2 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>))
  
  <span class="co"># Criação do tipo geométrico multiline</span>
  multilinestring &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_multilinestring</span>(<span class="kw">list</span>(linhas_s1, linhas_s2))
  
  
  <span class="co"># Crição dos polígonos</span>
  poligono_p1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))
  poligono_p2 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">5</span>))
  poligono_p2_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">4</span>))
  
  <span class="co"># Criação do tipo geométrico multipolygon</span>
  multipolygon &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_multipolygon</span>(<span class="kw">list</span>(<span class="kw">list</span>(poligono_p1), <span class="kw">list</span>(poligono_p2, poligono_p2_<span class="dv">1</span>)))
  
  <span class="co"># Criação do tipo geométrico </span>
  geometrycollection &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_geometrycollection</span>(<span class="kw">list</span>(multipoint, multilinestring, multipolygon))</code></pre></div>
<p>Os tipos geométricos criados são apresentados abaixo:</p>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>OS tipos geométricos que criamos são objetos da classe <code>sfg</code> (<em>Simple Feature Geometries</em>), os quais possuem apenas um único atributo, correspondem aos pontos no plano ou espaço. Para verificar a classe dos objetos:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Verificação da classe do tipo geométrico criado </span>
  <span class="kw">class</span>(multipoint)</code></pre></div>
<pre><code>## [1] &quot;XY&quot;         &quot;MULTIPOINT&quot; &quot;sfg&quot;</code></pre>
<p>Podemos representar uma lista de tipos geométricos com a classe <code>sfc</code> (<em>Simple Feature Columns</em>), a qual cria atributos de objetos <code>sfg</code>, por exemplo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Definição dos pontos</span>
  ponto_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)
  linha_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>))
  
  <span class="co"># Criação dos objetos sfg</span>
  point &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_point</span>(ponto_<span class="dv">1</span>)
  linestring &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(linha_<span class="dv">1</span>)
  
  <span class="co"># Criação de um objeto sfc</span>
  sfc_obj &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_sfc</span>(point, linestring)
  
  sfc_obj</code></pre></div>
<pre><code>## Geometry set for 2 features 
## geometry type:  GEOMETRY
## dimension:      XY
## bbox:           xmin: 1 ymin: 2 xmax: 3 ymax: 4
## epsg (SRID):    NA
## proj4string:    NA</code></pre>
<pre><code>## POINT (2 4)</code></pre>
<pre><code>## LINESTRING (1 2, 3 4)</code></pre>
<p>Observe que, diferentemente dos tipos geométricos da classe <code>sfg</code>, a classe <code>sfc</code> apresenta diferentes características, como a projeção <code>proj4string</code>, ID do sistema de referência geográfica <code>epsg</code>, <em>bounding box</em> <code>bbox</code> e a dimensão <code>dimension</code>.</p>
<p>No dia-a-dia vamos trabalhar com dados vetoriais provindos de diversas fontes, como IBGE e INPE. Logo, não vamos precisar criar nossos tipos geométricos e sim realizar a leitura dos arquivos que recebemos. Na subseção seguinte, vamos aprender como fazer a leitura de arquivos vetoriais.</p>
</div>
<div id="leitura-e-escrita-de-dados-vetoriais" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Leitura e escrita de dados vetoriais</h3>
<p>Os dados usados nesta subseção se encontram disponíveis em <code>data</code> neste diretório. O código abaixo apresenta a leitura do arquivo vetorial que contêm os estados brasileiros:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Leitura do arquivos .shp que contêm as unidades federativas  </span>
  shp_brazil &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">read_sf</span>(<span class="st">&quot;../data/1_estados_do_brasil_shape/Brasil.shp&quot;</span>)  
  
  <span class="co"># Visualização dos atributos .shp</span>
  <span class="kw">head</span>(shp_brazil, <span class="dv">4</span>)</code></pre></div>
<pre><code>## Simple feature collection with 4 features and 4 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.99094 ymin: -11.14449 xmax: -35.15167 ymax: 4.437122
## epsg (SRID):    NA
## proj4string:    +proj=longlat +ellps=aust_SA +no_defs
## # A tibble: 4 x 5
##   ESTADOS   REGIAO  COD_UF UF                                           geometry
##   &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;                              &lt;MULTIPOLYGON [°]&gt;
## 1 &quot;Acre&quot;    Norte       12 AC    (((-73.80098 -7.111453, -73.74084 -7.143186, -…
## 2 &quot;Alagoas&quot; Nordes…     27 AL    (((-36.39119 -10.50082, -36.39864 -10.49789, -…
## 3 &quot;Amap\xe… Norte       16 AP    (((-51.3738 -0.3705301, -51.37337 -0.3671281, …
## 4 &quot;Amazona… Norte       13 AM    (((-73.80098 -7.111453, -73.80106 -7.111288, -…</code></pre>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Verificação da classe do arquivo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">class</span>(shp_brazil)</code></pre></div>
<pre><code>## [1] &quot;sf&quot;         &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>Diferentemente dos tipos geométricos que criamos anteriormente (<code>sfg</code>), objetos da classe <code>sf</code> possuem atributos que correspondem ao tipo geométricos e as características do dado vetorial, ou seja, são um junção entre as classes <code>sfg</code>e <code>sfc</code>. Por exemplo, é possível observar o tipo geométrico dos estados brasileiros (<code>MULTIPOLYGON</code>), bem como as regiões de cada estado (<code>REGIAO</code>), representadas por um atributo discreto.</p>
<p>O pacote <code>sf</code>, utilizando como base o <code>GDAL</code>, fornece suporte de leitura e escrita para diversos formatos, tais como: <strong>GeoJSON</strong> e <strong>KML</strong>. O código abaixo mostra como salvar os tipos geométricos de criamos anteriormente:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Transformando para texto</span>
  gc_text &lt;-<span class="st"> </span>
<span class="st">  </span>sf<span class="op">::</span><span class="kw">st_as_text</span>(geometrycollection)

  <span class="co"># Transformando para objeto sfc</span>
  gc_sfc &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_as_sfc</span>(gc_text)
  
  <span class="co"># Escrita do tipo geométrico geometry collection em .shp</span>
  sf<span class="op">::</span><span class="kw">write_sf</span>(gc_sfc, <span class="st">&quot;./dados/geometrycollection_curso.shp&quot;</span>)</code></pre></div>
<p>Um breve resumos das classes do pacote <strong>SF</strong>:</p>
<ul>
<li><code>sfg</code> Único objeto geométrico, por exemplo, <code>POINT</code>.</li>
<li><code>sfc</code> Junção de tipos geométricos da classe <code>sfg</code>. Possui informações como projeção e sistema de referência geogŕafica.</li>
<li><code>sf</code> Junção das classes <code>sfg</code> e <code>sfc</code>. Contêm atributos correspondentes ao tipo geométricos, bem como atributos discretos, categóricos que representam características do objeto.</li>
</ul>
<p>Agora que aprendemos a diferença entre cada classe do pacote <code>sf</code> e como fazer a leitura e escrita de dados vetoriais, na subseção seguinte vamos aprender sobre os relacionamentos espaciais, de acordo com a Matriz de 9-interseções Estendida Dimensionalmente (DE-9IM).</p>
</div>
<div id="relacionamentos-espaciais-1" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Relacionamentos Espaciais</h3>
<p>Para realizar a análise de dados espaciais é necessário o uso de diversos métodos espaciais, com a finalidade de verificar se dois objetos possuem alguma relação, por exemplo, para identificar a quantidade de focos de queimada no estado de São Paulo. Assim, o uso de tais métodos se tornam indispensáveis durante a manipulação de dados espaciais.</p>
<p>Os métodos apresentados nesta subseção:</p>
<ul>
<li><p><code>Equals</code> - Verifica se duas geometrias são iguais;</p></li>
<li><p><code>Disjoint</code> - Verifica se duas geometrias são disjuntas;</p></li>
<li><p><code>Touches</code> - Verifica se duas geometricas se tocam;</p></li>
<li><p><code>Crosses</code> - Verifica se duas geometricas se cruzam;</p></li>
<li><p><code>Within</code>- Verifica se a geometria A está contida em B;</p></li>
<li><p><code>Contains</code> - Verifica se a geometria B contêm;</p></li>
<li><p><code>Overleaps</code> - Verifica se duas geometrias se sobrepõem;</p></li>
<li><p><code>Intersects</code> - Verifica se duas geometricas se interseccionam.</p></li>
</ul>
<div id="equals" class="section level4">
<h4><span class="header-section-number">2.2.3.1</span> Equals</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Definição dos pontos</span>
  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))
  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>),
                      <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">1</span>),
                      <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">3</span>))
  
  <span class="co"># Criação dos tipos geométricos</span>
  polygon_a &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))
  polygon_b &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>Para saber se duas geometrias são iguais, usa-se o métodos <code>st_equals</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Verifica se duas geometrias são iguais</span>
  sf<span class="op">::</span><span class="kw">st_equals</span>(polygon_a, polygon_b, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##       [,1]
## [1,] FALSE</code></pre>
<p>O retorno do método é um lista com tamanho 1, com valores binários, <strong>TRUE</strong> ou <strong>FALSE</strong>. Desta forma, os polígonos criados não são iguais, pois o polígono B possui mais pontos. O código abaixo a apresenta a verificação de dois pontos:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação dos pontos</span>
  ponto_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))
  ponto_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">    <span class="co"># Verifica se duas geometrias são iguais</span>
  sf<span class="op">::</span><span class="kw">st_equals</span>(ponto_<span class="dv">1</span>, ponto_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
<blockquote>
<p>Para verificar se duas geometricas são exatamente iguais, use <code>st_equals_exact</code>.</p>
</blockquote>
</div>
<div id="disjoint" class="section level4">
<h4><span class="header-section-number">2.2.3.2</span> Disjoint</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação dos linestrings</span>
  segmento_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="fl">1.5</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">5</span>))
  segmento_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>))
  
  <span class="co"># Criação dos tipos geométricos linestring</span>
  linestring_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">1</span>)
  linestring_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">2</span>)</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<p>Para saber se duas geometrias são disjuntas, usa-se o métodos <code>st_disjoint</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Verifica se duas geometrias são disjuntas</span>
  sf<span class="op">::</span><span class="kw">st_disjoint</span>(linestring_<span class="dv">1</span>,linestring_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
<p>Outro exemplo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">    <span class="co"># Criação dos polígonos</span>
  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>),
                      <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))
  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">2</span>),
                      <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>))
  
  <span class="co"># Criação dos tipos geométricos polygons</span>
  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))
  polygon_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">    <span class="co"># Verifica se duas geometrias são disjuntas</span>
   sf<span class="op">::</span><span class="kw">st_disjoint</span>(polygon_<span class="dv">1</span>,polygon_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##       [,1]
## [1,] FALSE</code></pre>
</div>
<div id="touches" class="section level4">
<h4><span class="header-section-number">2.2.3.3</span> Touches</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação dos polígonos</span>
  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))
  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>))
  
  <span class="co"># Criação dos tipos geométricos</span>
  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))
  polygon_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>Para verificar se duas geometrias se tocam, usa-se o método <code>st_touches</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">    <span class="co"># Verifica se duas geometrias se tocam</span>
    sf<span class="op">::</span><span class="kw">st_touches</span>(polygon_<span class="dv">1</span>, polygon_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
<p>Outro exemplo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação dos segmentos</span>
  segmento_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">8</span>))
  segmento_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">9</span>))
  
  <span class="co"># Criação dos tipos geométricos</span>
  linestring_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">1</span>)
  linestring_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">2</span>)</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Verifica se duas geometrias se tocam</span>
  sf<span class="op">::</span><span class="kw">st_touches</span>(linestring_<span class="dv">1</span>, linestring_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##       [,1]
## [1,] FALSE</code></pre>
</div>
<div id="crosses" class="section level4">
<h4><span class="header-section-number">2.2.3.4</span> Crosses</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação da reta e polígono</span>
  segmento_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">11</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">13</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">13</span>,<span class="dv">6</span>))
  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">12</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">12</span>,<span class="dv">7</span>), <span class="kw">c</span>(<span class="dv">15</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">12</span>,<span class="dv">4</span>))
  
  <span class="co"># Criação dos objetos geométricos</span>
  linestring_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">1</span>)
  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
<p>Para verificar se duas geometrias se tocam, usa-se o método <code>st_touches</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Verifica se duas geometrias se cruzam</span>
  sf<span class="op">::</span><span class="kw">st_crosses</span>(linestring_<span class="dv">1</span>, polygon_<span class="dv">1</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
<p>Outro exemplo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação da reta e dos pontos</span>
  segmento_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">3</span>))
  ponto_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">2</span>))
  
  <span class="co"># Criação dos objetos geométricos</span>
  linestring_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">1</span>)
  multipoint_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_multipoint</span>(ponto_<span class="dv">1</span>)</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-47-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">    <span class="co"># Verifica se duas geometrias se cruzam</span>
    sf<span class="op">::</span><span class="kw">st_crosses</span>(linestring_<span class="dv">1</span>, multipoint_<span class="dv">1</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
</div>
<div id="within" class="section level4">
<h4><span class="header-section-number">2.2.3.5</span> Within</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação dos polígonos  </span>
  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))
  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))
  
  <span class="co"># Criação dos objetos geométricos</span>
  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))
  polygon_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<p>Para verificar se o polígono 1 está dentro do polígono 2, usa-se o método <code>st_within</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">      <span class="co"># Verifica se o poligono 1 está dentro do polígono 2</span>
  sf<span class="op">::</span><span class="kw">st_within</span>(polygon_<span class="dv">1</span>, polygon_<span class="dv">2</span>, <span class="dt">sparse=</span><span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
</div>
<div id="contains" class="section level4">
<h4><span class="header-section-number">2.2.3.6</span> Contains</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação do ponto e do polígono  </span>
  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">9</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">9</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">6</span>))
  ponto_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">8</span>)
  
  <span class="co"># Criação dos tipos geométricos</span>
  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))
  point_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_point</span>(ponto_<span class="dv">1</span>)</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
<p>Para verificar se o polígono 1 contém o ponto 1, usa-se o método <code>st_contains</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">   <span class="co"># Verifica se o poligono 1 contém o ponto 1</span>
  sf<span class="op">::</span><span class="kw">st_contains</span>(polygon_<span class="dv">1</span>, point_<span class="dv">1</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
</div>
<div id="overlaps" class="section level4">
<h4><span class="header-section-number">2.2.3.7</span> Overlaps</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação dos polígonos</span>
  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">1</span>))
  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">13</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">13</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">13</span>,<span class="dv">1</span> ))
  
  <span class="co"># Criação dos tipos geométricos</span>
  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))
  polygon_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<p>Para verificar se o polígono 1 sobrepõe o polígono 2, usa-se o método <code>st_overlaps</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Verifica se o poligono 1 sobrepõe o poligono 2</span>
  sf<span class="op">::</span><span class="kw">st_overlaps</span>(polygon_<span class="dv">1</span>, polygon_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
<p>Outro exemplo:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação das retas</span>
  segmento_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">12</span>,<span class="dv">8</span>))
  segmento_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">11</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">11</span>,<span class="dv">9</span>))
  
  <span class="co"># Criação dos tipos geométricos</span>
  linestring_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">1</span>)
  linestring_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">2</span>)</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">    <span class="co"># Verifica se a linestring 1 sobrepõe a linestring 2</span>
    sf<span class="op">::</span><span class="kw">st_overlaps</span>(linestring_<span class="dv">1</span>, linestring_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span> )</code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
</div>
<div id="intersects" class="section level4">
<h4><span class="header-section-number">2.2.3.8</span> Intersects</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Criação dos polígonos</span>
  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">7</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">9</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">9</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">7</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">7</span>))
  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">6</span>))
  
  <span class="co"># Criação dos tipos geométricos</span>
  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))
  polygon_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>Para verificar se o polígono 1 intersecta o polígono 2, usa-se o método <code>st_intersects</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  sf<span class="op">::</span><span class="kw">st_intersects</span>(polygon_<span class="dv">1</span>, polygon_<span class="dv">2</span>, <span class="dt">sparse=</span><span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
</div>
</div>
<div id="operadores-métricos" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Operadores Métricos</h3>
<p>Os operadores e os dados apresentados nesta subseção, estão presentes na seção de <a href=""><strong>Python</strong></a> e <a href=""><strong>PostGIS</strong></a>. A seção em <strong>Python</strong> cobre com mais detalhes cada operador. Nesta subseção vamos usar tais operadores métricos: - <code>st_area</code> - Área de um tipo geométrico poligonal - <code>st_length</code> - Comprimento de tipos geométricos 1D (<code>LINESTRING</code>)</p>
<div id="área" class="section level4">
<h4><span class="header-section-number">2.2.4.1</span> Área</h4>
<p>Vamos calcular a área do estado de estado do Rio de Janeiro, para isso vamos utilizar tudo que aprendemos até agora:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Importação do ggplot2 para visualização de dados</span>
  <span class="kw">library</span>(ggplot2)
  <span class="co"># Leitura do shp que contém os estados brasileiros</span>
  shp_brazil &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">read_sf</span>(<span class="st">&quot;../data/1_estados_do_brasil_shape/Brasil.shp&quot;</span>)  
  
  <span class="co"># Seleção do estado do Rio de Janeiro</span>
  estado_rj &lt;-<span class="st"> </span>shp_brazil <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(ESTADOS<span class="op">==</span><span class="st">&quot;Rio de Janeiro&quot;</span>)
  
  <span class="co"># Visualização </span>
  ggplot2<span class="op">::</span><span class="kw">theme_set</span>(ggplot2<span class="op">::</span><span class="kw">theme_bw</span>())
  ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> estado_rj) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Longitude&quot;</span>,
         <span class="dt">y =</span> <span class="st">&quot;Latitude&quot;</span>,
         <span class="dt">title =</span> <span class="st">&quot;Limites do estado do Rio de Janeiro&quot;</span>)</code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Cálculo da área em metros quadrados</span>
  area_rj &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_area</span>(estado_rj)
  
  area_rj</code></pre></div>
<pre><code>## 43791834545 [m^2]</code></pre>
<p>Podemos converter a área para <span class="math inline">\(Km^2\)</span> para facilitar a comparação dos resultados.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Conversão para km^2</span>
  area_rj &lt;-<span class="st"> </span>area_rj<span class="op">/</span><span class="fl">1e+6</span>
  
  area_rj</code></pre></div>
<pre><code>## 43791.83 [m^2]</code></pre>
<p>Segundo o <a href="https://www.ibge.gov.br/home/geociencias/areaterritorial/principal.shtm">IBGE</a> (Instituto Brasileiro de Geografia e Estatística), a área do estado do Rio de Janeiro correspnde a <span class="math inline">\(43.781,588 Km^2\)</span> e a área da retornada pela nossa consulta <span class="math inline">\(43.791,83 Km^2\)</span>. A diferença foi relativamente baixa, mostrando a eficácia do método no cálculo da área.</p>
</div>
<div id="comprimento" class="section level4">
<h4><span class="header-section-number">2.2.4.2</span> Comprimento</h4>
<p>Assim como a área, vamos utilizar todos os conceitos vistos até agora no minicurso. Vamos medir o comprimento do <a href="https://pt.wikipedia.org/wiki/Rio_Para%C3%ADba_do_Sul">Rio Paraíba do Sul</a>, o trecho de código abaixo apresenta a leitura dos rios de todo o território brasileiro:</p>
<blockquote>
<p>Todos os dados usados neste minicurso estão no diretório <code>data</code></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Leitura do shapefile   </span>
  rios_brazil &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">read_sf</span>(<span class="st">&quot;../data/4_rios_brasil/Brasil_rios.shp&quot;</span>)
  <span class="co"># Visualização dos dados</span>
  <span class="kw">head</span>(rios_brazil, <span class="dv">4</span>)</code></pre></div>
<pre><code>## Simple feature collection with 4 features and 7 fields
## geometry type:  MULTILINESTRING
## dimension:      XY
## bbox:           xmin: -67.34078 ymin: -6.052164 xmax: -36.73497 ymax: 1.997553
## epsg (SRID):    NA
## proj4string:    +proj=longlat +ellps=aust_SA +no_defs
## # A tibble: 4 x 8
##   OBJECTID IDRIO CORIO NORIOCOMP NUDISTBACR NUCOMPRIO DSVERSAO
##      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;   
## 1        1 47715 7516… Rio Cani…       63.8     134.  BHO 201…
## 2        2 35341 7522… Riacho C…      346.       42.1 BHO 201…
## 3        3 36318 7561… Riacho C…      116.       45.9 BHO 201…
## 4        4 50455 48_0  Rio Negro     1430.     1347.  BHO 201…
## # … with 1 more variable: geometry &lt;MULTILINESTRING [°]&gt;</code></pre>
<p>Vamos filtrar pelo Rio Paraíba do Sul:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Filtro do rio paraiba do sul</span>
  rio_paraiba &lt;-<span class="st"> </span>rios_brazil <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(NORIOCOMP <span class="op">==</span><span class="st"> &quot;Rio Paraíba do Sul&quot;</span>)

  <span class="co"># Comprimeiro do rio paraiba do sul</span>
  rio_paraiba_comp &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_length</span>(rio_paraiba)
  
  rio_paraiba_comp</code></pre></div>
<pre><code>## 868441.2 [m]</code></pre>
<p>Para fazer a conversão vamos utilizar o pacote <code>units</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Importação  do pacote units</span>
  <span class="kw">library</span>(units)</code></pre></div>
<pre><code>## udunits system database from /usr/share/xml/udunits</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Conversão para km</span>
  rio_paraiba_comp &lt;-<span class="st"> </span>units<span class="op">::</span><span class="kw">set_units</span>(rio_paraiba_comp, km)

  rio_paraiba_comp</code></pre></div>
<pre><code>## 868.4412 [km]</code></pre>
<p>Segundo a <a href="https://pt.wikipedia.org/wiki/Listas_de_rios_do_Brasil">Wikipedia</a>, o comprimento do Rio Paraíba do Sul correponde a <span class="math inline">\(1.137 Km\)</span> e o nosso método obteve <span class="math inline">\(\approx 868 Km\)</span>.</p>
<blockquote>
<p>Os exercícios apresentados foram retirados do material da disciplina de <a href="https://github.com/gqueiroz/cap349">Banco de Dados Geográficos</a></p>
</blockquote>
</div>
</div>
<div id="sistemas-de-referências" class="section level3">
<h3><span class="header-section-number">2.2.5</span> Sistemas de referências</h3>
<p>Como apresentado no capítulo 1, podemos representar nossos dados espaciais utilizando diversos tipos de projeções. Desta forma, nesta subseção vamos aprender como realizar a conversão e a transformação dos nossos dados. O trecho de código abaixo mostra como verificar qual a projeção dos nossos dados.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Verifica o sistema de referencia geográfica</span>
  sf<span class="op">::</span><span class="kw">st_crs</span>(shp_brazil)</code></pre></div>
<pre><code>## Coordinate Reference System:
##   No EPSG code
##   proj4string: &quot;+proj=longlat +ellps=aust_SA +no_defs&quot;</code></pre>
<p>O trecho de código acima mostra que nenhum <strong>EPSG</strong> foi definido, para conveter podemos usar o mesmo método:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Conversão do sistema de referência geográfica</span>
  sf<span class="op">::</span><span class="kw">st_crs</span>(shp_brazil) &lt;-<span class="st"> </span><span class="dv">4326</span></code></pre></div>
<pre><code>## Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform for
## that</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  sf<span class="op">::</span><span class="kw">st_crs</span>(shp_brazil)</code></pre></div>
<pre><code>## Coordinate Reference System:
##   EPSG: 4326 
##   proj4string: &quot;+proj=longlat +datum=WGS84 +no_defs&quot;</code></pre>
<p>Agora que definimos nosso <strong>ESPG</strong>, vamos visualizar as coordenadas geográficas:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Visualização das três primeiras localizações</span>
  <span class="kw">head</span>(shp_brazil<span class="op">$</span>geometry, <span class="dv">3</span>)</code></pre></div>
<pre><code>## Geometry set for 3 features 
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.99094 ymin: -11.14449 xmax: -35.15167 ymax: 4.437122
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs</code></pre>
<pre><code>## MULTIPOLYGON (((-73.80098 -7.111453, -73.74084 ...</code></pre>
<pre><code>## MULTIPOLYGON (((-36.39119 -10.50082, -36.39864 ...</code></pre>
<pre><code>## MULTIPOLYGON (((-51.3738 -0.3705301, -51.37337 ...</code></pre>
<p>É possível observar que as coordenadas estão em graus, no entanto, e se quisermos trabalhar com metros? É só fazer a conversão?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">    <span class="co"># Conversão para metros usando WGS 84 na zona 23S</span>
    sf<span class="op">::</span><span class="kw">st_crs</span>(shp_brazil) &lt;-<span class="st"> </span><span class="dv">32723</span></code></pre></div>
<pre><code>## Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform for
## that</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">    <span class="kw">head</span>(shp_brazil<span class="op">$</span>geometry, <span class="dv">3</span>)</code></pre></div>
<pre><code>## Geometry set for 3 features 
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.99094 ymin: -11.14449 xmax: -35.15167 ymax: 4.437122
## epsg (SRID):    32723
## proj4string:    +proj=utm +zone=23 +south +datum=WGS84 +units=m +no_defs</code></pre>
<pre><code>## MULTIPOLYGON (((-73.80098 -7.111453, -73.74084 ...</code></pre>
<pre><code>## MULTIPOLYGON (((-36.39119 -10.50082, -36.39864 ...</code></pre>
<pre><code>## MULTIPOLYGON (((-51.3738 -0.3705301, -51.37337 ...</code></pre>
<p>O método de conversão não faz transformação das coordenadas geográficas. Para fazer a transformação, podemos usar o método <code>st_transform</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Conversão do sistema de referência geográfica</span>
  sf<span class="op">::</span><span class="kw">st_crs</span>(shp_brazil) &lt;-<span class="st"> </span><span class="dv">4326</span></code></pre></div>
<pre><code>## Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform for
## that</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co"># Transformação para metros usando WGS 84 na zona 23S</span>
  shp_brazil &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_transform</span>(shp_brazil, <span class="dv">32723</span>)
  
  <span class="kw">head</span>(shp_brazil<span class="op">$</span>geometry, <span class="dv">3</span>)</code></pre></div>
<pre><code>## Geometry set for 3 features 
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -2839595 ymin: 8649068 xmax: 1587862 ymax: 10493640
## epsg (SRID):    32723
## proj4string:    +proj=utm +zone=23 +south +datum=WGS84 +units=m +no_defs</code></pre>
<pre><code>## MULTIPOLYGON (((-2819509 9103452, -2811689 9099...</code></pre>
<pre><code>## MULTIPOLYGON (((1445354 8826197, 1444540 882654...</code></pre>
<pre><code>## MULTIPOLYGON (((-210707.1 9958789, -210659.5 99...</code></pre>
</div>
<div id="materiais-recomendados" class="section level3">
<h3><span class="header-section-number">2.2.6</span> Materiais recomendados</h3>
<p><a href="!https://github.com/rafaeldcsantos/CAP-394">Rafael Santos</a></p>
<p><a href="https://github.com/gqueiroz/cap349">Disciplina de Banco de Dados Geográfico - CAP349</a></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introdução.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="python.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
