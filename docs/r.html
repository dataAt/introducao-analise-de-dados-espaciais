<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 R üíé | intro-analise-de-dados-espaciais.utf8.md</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="2 R üíé | intro-analise-de-dados-espaciais.utf8.md" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 R üíé | intro-analise-de-dados-espaciais.utf8.md" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introducao.html"/>
<link rel="next" href="python.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introducao.html"><a href="introducao.html"><i class="fa fa-check"></i><b>1</b> Introdu√ß√£o üó∫</a><ul>
<li class="chapter" data-level="1.1" data-path="introducao.html"><a href="introducao.html#representacoes-de-dados-espaciais"><i class="fa fa-check"></i><b>1.1</b> Representa√ß√µes de dados espaciais</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introducao.html"><a href="introducao.html#vetoriais"><i class="fa fa-check"></i><b>1.1.1</b> Vetoriais</a></li>
<li class="chapter" data-level="1.1.2" data-path="introducao.html"><a href="introducao.html#matriciais"><i class="fa fa-check"></i><b>1.1.2</b> Matriciais</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introducao.html"><a href="introducao.html#sistema-de-referencia-espacial"><i class="fa fa-check"></i><b>1.2</b> Sistema de refer√™ncia espacial</a></li>
<li class="chapter" data-level="1.3" data-path="introducao.html"><a href="introducao.html#projecoes-cartograficas"><i class="fa fa-check"></i><b>1.3</b> Proje√ß√µes cartogr√°ficas</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introducao.html"><a href="introducao.html#tipos-de-projecao"><i class="fa fa-check"></i><b>1.3.1</b> Tipos de proje√ß√£o</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introducao.html"><a href="introducao.html#sistema-de-coordenadas"><i class="fa fa-check"></i><b>1.4</b> Sistema de Coordenadas</a><ul>
<li class="chapter" data-level="1.4.1" data-path="introducao.html"><a href="introducao.html#sistemas-de-coordenadas-geograficas"><i class="fa fa-check"></i><b>1.4.1</b> Sistemas de Coordenadas Geogr√°ficas</a></li>
<li class="chapter" data-level="1.4.2" data-path="introducao.html"><a href="introducao.html#coordenadas-planas"><i class="fa fa-check"></i><b>1.4.2</b> Coordenadas planas</a></li>
<li class="chapter" data-level="1.4.3" data-path="introducao.html"><a href="introducao.html#codigos-epsg"><i class="fa fa-check"></i><b>1.4.3</b> C√≥digos EPSG</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introducao.html"><a href="introducao.html#open-geospatial-consortium-ogc"><i class="fa fa-check"></i><b>1.5</b> Open Geospatial Consortium (OGC)</a></li>
<li class="chapter" data-level="1.6" data-path="introducao.html"><a href="introducao.html#tipos-e-operacoes-espaciais"><i class="fa fa-check"></i><b>1.6</b> Tipos e opera√ß√µes espaciais</a></li>
<li class="chapter" data-level="1.7" data-path="introducao.html"><a href="introducao.html#relacionamentos-espaciais-nomeados"><i class="fa fa-check"></i><b>1.7</b> Relacionamentos espaciais nomeados</a><ul>
<li class="chapter" data-level="1.7.1" data-path="introducao.html"><a href="introducao.html#relacionamentos-espaciais"><i class="fa fa-check"></i><b>1.7.1</b> Relacionamentos espaciais</a></li>
<li class="chapter" data-level="1.7.2" data-path="introducao.html"><a href="introducao.html#restricoes-espaciais"><i class="fa fa-check"></i><b>1.7.2</b> Restri√ß√µes espaciais</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="introducao.html"><a href="introducao.html#matriz-de-9-intersecoes-estendida-dimensionalmente"><i class="fa fa-check"></i><b>1.8</b> Matriz de 9-Interse√ß√µes Estendida dimensionalmente</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r.html"><a href="r.html"><i class="fa fa-check"></i><b>2</b> R üíé</a><ul>
<li class="chapter" data-level="2.1" data-path="r.html"><a href="r.html#tibble"><i class="fa fa-check"></i><b>2.1</b> Tibble</a><ul>
<li class="chapter" data-level="2.1.1" data-path="r.html"><a href="r.html#tidyverse"><i class="fa fa-check"></i><b>2.1.1</b> Tidyverse</a></li>
<li class="chapter" data-level="2.1.2" data-path="r.html"><a href="r.html#manipulacao-de-dados"><i class="fa fa-check"></i><b>2.1.2</b> Manipula√ß√£o de dados</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r.html"><a href="r.html#sf"><i class="fa fa-check"></i><b>2.2</b> SF</a><ul>
<li class="chapter" data-level="2.2.1" data-path="r.html"><a href="r.html#tipos-geometricos"><i class="fa fa-check"></i><b>2.2.1</b> Tipos Geom√©tricos</a></li>
<li class="chapter" data-level="2.2.2" data-path="r.html"><a href="r.html#leitura-e-escrita-de-dados-vetoriais"><i class="fa fa-check"></i><b>2.2.2</b> Leitura e escrita de dados vetoriais</a></li>
<li class="chapter" data-level="2.2.3" data-path="r.html"><a href="r.html#relacionamentos-espaciais-1"><i class="fa fa-check"></i><b>2.2.3</b> Relacionamentos Espaciais</a></li>
<li class="chapter" data-level="2.2.4" data-path="r.html"><a href="r.html#operadores-metricos"><i class="fa fa-check"></i><b>2.2.4</b> Operadores M√©tricos</a></li>
<li class="chapter" data-level="2.2.5" data-path="r.html"><a href="r.html#sistemas-de-referencias"><i class="fa fa-check"></i><b>2.2.5</b> Sistemas de refer√™ncias</a></li>
<li class="chapter" data-level="2.2.6" data-path="r.html"><a href="r.html#materiais-recomendados"><i class="fa fa-check"></i><b>2.2.6</b> Materiais recomendados</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="python.html"><a href="python.html"><i class="fa fa-check"></i><b>3</b> Python ‚ú®</a><ul>
<li class="chapter" data-level="3.1" data-path="python.html"><a href="python.html#pandas"><i class="fa fa-check"></i><b>3.1</b> Pandas üêº</a><ul>
<li class="chapter" data-level="3.1.1" data-path="python.html"><a href="python.html#manipulacao-de-dados-1"><i class="fa fa-check"></i><b>3.1.1</b> Manipula√ß√£o de dados</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="python.html"><a href="python.html#geopandas"><i class="fa fa-check"></i><b>3.2</b> GeoPandas üåéüêº</a><ul>
<li class="chapter" data-level="3.2.1" data-path="python.html"><a href="python.html#geoseries-e-geodataframes"><i class="fa fa-check"></i><b>3.2.1</b> GeoSeries e GeoDataFrames</a></li>
<li class="chapter" data-level="3.2.2" data-path="python.html"><a href="python.html#leitura-e-escrita-de-dados-1"><i class="fa fa-check"></i><b>3.2.2</b> Leitura e escrita de dados</a></li>
<li class="chapter" data-level="3.2.3" data-path="python.html"><a href="python.html#manipulacao-geometrica"><i class="fa fa-check"></i><b>3.2.3</b> Manipula√ß√£o geom√©trica</a></li>
<li class="chapter" data-level="3.2.4" data-path="python.html"><a href="python.html#selecao-e-filtro-de-dados"><i class="fa fa-check"></i><b>3.2.4</b> Sele√ß√£o e filtro de dados</a></li>
<li class="chapter" data-level="3.2.5" data-path="python.html"><a href="python.html#manipulacao-de-projecoes"><i class="fa fa-check"></i><b>3.2.5</b> Manipula√ß√£o de proje√ß√µes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="introducao-ao-postgis.html"><a href="introducao-ao-postgis.html"><i class="fa fa-check"></i><b>4</b> Introdu√ß√£o ao postgis üêò</a><ul>
<li class="chapter" data-level="4.1" data-path="introducao-ao-postgis.html"><a href="introducao-ao-postgis.html#instalacao"><i class="fa fa-check"></i><b>4.1</b> Instala√ß√£o</a></li>
<li class="chapter" data-level="4.2" data-path="introducao-ao-postgis.html"><a href="introducao-ao-postgis.html#um-pouco-de-sql"><i class="fa fa-check"></i><b>4.2</b> Um pouco de SQL</a><ul>
<li class="chapter" data-level="4.2.1" data-path="introducao-ao-postgis.html"><a href="introducao-ao-postgis.html#acessando-a-interface-postgresql"><i class="fa fa-check"></i><b>4.2.1</b> Acessando a interface PostgreSQL</a></li>
<li class="chapter" data-level="4.2.2" data-path="introducao-ao-postgis.html"><a href="introducao-ao-postgis.html#criando-uma-nova-base-de-dados"><i class="fa fa-check"></i><b>4.2.2</b> Criando uma nova base de dados</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>5</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r" class="section level1">
<h1><span class="header-section-number">2</span> R üíé</h1>
<p><strong>R</strong> √© uma linguagem de programa√ß√£o de alto n√≠vel voltada para visualiza√ß√£o e an√°lise de dados. Com base na linguagem de programa√ß√£o <strong>S </strong> foi criada pelos estat√≠sticos <strong>R</strong>oss Ihaka e <strong>R</strong>obert Gentleman no departamento de estat√≠stica da universidade de Auckland na Nova Zel√¢ndia. A linguagem R √© mantida pelo grupo <strong>R Core Team</strong>.</p>
<p>O artigo publicado pela <span class="citation">Tippmann (2015)</span>, mostra a crescente ades√£o do uso da linguagem R em diferentes √°reas cientificas. A Figura <a href="r.html#fig:fig1">2.1</a> evid√™ncia o crescimento mencionado anteriomente.</p>
<div class="figure" style="text-align: center"><span id="fig:fig1"></span>
<img src="res/2_r/r_articles.png" alt="S√©rie temporal de cita√ß√µes dos pacotes feitos em R - Fonte: @tippmann2015programming" width="50%" />
<p class="caption">
Figure 2.1: S√©rie temporal de cita√ß√µes dos pacotes feitos em R - Fonte: <span class="citation">Tippmann (2015)</span>
</p>
</div>
<p>Como apresentado no cap√≠tulo anterior, o objetivo desta se√ß√£o √© apresentar o uso da linguagem de programa√ß√£o R para an√°lise de dados espaciais, os quais comp√µem a ci√™ncia da geoinforma√ß√£o.</p>
<div id="tibble" class="section level2">
<h2><span class="header-section-number">2.1</span> Tibble</h2>
<p>As estruturas de dados (ED‚Äôs) do pacote <em>base</em> do R, por exemplo, <code>data.frame</code> e <code>matrix</code>, oferecem diversos m√©todos de adi√ß√£o, manipula√ß√£o e exclus√£o de dados. No entanto, tais m√©todos possuem certas limita√ß√µes impostas pela linguagem, para adicionar quaisquer mudan√ßas nestes m√©todos √© necess√°rio editar o c√≥digo-fonte dos mesmos. Com o objetivo de abstrair as complexidades e o alta verbosidade das estruturas de dados tradicionais, a comunidade cria diversos pacotes que buscam a integra√ß√£o e a f√°cil manipula√ß√£o dos mesmos.</p>
<p>Neste minicurso, optamos por usar o pacote <code>tibble</code> do que o m√©todo <code>data.frame</code> oferecido pelo pacote <code>base</code>. No entanto, vamos usar o termo <strong>Data frame</strong> como estruta de dados, a qual √© implementada pelo pacote <code>tibble</code>.</p>
<div class="figure" style="text-align: center"><span id="fig:fig2"></span>
<img src="res/2_r/vec_matriz.png" alt="Estrutura de dados: Vetor e Matriz" width="50%" />
<p class="caption">
Figure 2.2: Estrutura de dados: Vetor e Matriz
</p>
</div>
<p>Podemos definir <strong>Data frame</strong> como uma matriz (Figura <a href="r.html#fig:fig2">2.2</a>), composta por linhas e colunas, cujas colunas representam as vari√°veis (atributos) e as linhas representam observa√ß√µes. A Figura <a href="r.html#fig:fig3">2.3</a> apresenta um <strong>Data frame</strong>, a qual √© poss√≠vel observar as defini√ß√µes mencionadas anteriormente, desta forma, sabemos que o aluno <strong>Jos√©</strong> obteve <strong>7.2</strong> na disciplina de √Ålgebra Linear.</p>
<div class="figure" style="text-align: center"><span id="fig:fig3"></span>
<img src="res/2_r/df_definicao.png" alt=" Representa√ß√£o de um Data frame - Fonte: @gk4gk2019" width="80%" />
<p class="caption">
Figure 2.3:  Representa√ß√£o de um Data frame - Fonte: <span class="citation">GeeksforGeeks (2018)</span>
</p>
</div>
<p>O trecho de c√≥digo a seguir apresenta a implementa√ß√£o do <strong>Data frame</strong> apresentado anteriomente.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">  <span class="co"># Importa√ß√£o do pacote </span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  <span class="kw">library</span>(tibble)  </a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  <span class="co"># Cria√ß√£o do tibble</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  df_escola &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">Aluno =</span> <span class="kw">c</span>(<span class="st">&quot;Jos√©&quot;</span>, <span class="st">&quot;Maria&quot;</span>, <span class="st">&quot;Ana&quot;</span>, <span class="st">&quot;Carlos&quot;</span>),</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">                              <span class="st">`</span><span class="dt">√Ålgebra Linear</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">7</span>),</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">                              <span class="st">`</span><span class="dt">C√°lculo I</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">5</span>),</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">                              <span class="st">`</span><span class="dt">Eng. Software</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">9</span>, <span class="dv">5</span>, <span class="dv">9</span>),</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">                              <span class="st">`</span><span class="dt">PAD</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">9</span>))</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">    </a>
<a class="sourceLine" id="cb1-11" data-line-number="11">  <span class="co"># Visualiza√ß√£o dos dados </span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12">  df_escola</a></code></pre></div>
<pre><code>## # A tibble: 4 x 5
##   Aluno  `√Ålgebra Linear` `C√°lculo I` `Eng. Software`   PAD
##   &lt;chr&gt;             &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1 Jos√©                  7           8              10     5
## 2 Maria                10           9               9     7
## 3 Ana                   8          10               5     4
## 4 Carlos                7           5               9     9</code></pre>
<p>O pacote <code>tibble</code> possui diversas vantagens em rela√ß√£o ao tradicional <code>data.frame</code>, por exemplo, ainda no <code>tibble</code> criado anteriormente, √© poss√≠vel observar os tipos de cada atributo. Com o objetivo de facilitar a etapa de an√°lise de dados, o pacote <code>tibble</code> n√£o faz a convers√£o de atributos do tipo <code>character</code> para <code>factor</code> de forma autom√°tica.</p>
<p>Outra grande vantagem do <code>tibble</code> √© a intera√ß√£o com os m√©todos criados para o <code>data.frame</code>, esses provindos do pacote <code>base</code>, por exemplo, o m√©todo <code>mean()</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">  <span class="kw">mean</span>(df_escola<span class="op">$</span><span class="st">`</span><span class="dt">C√°lculo I</span><span class="st">`</span>)</a></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p>Desta forma, podemos usar quaisquer m√©todos criados para uso no <code>data.frame</code> no <code>tibble</code>. O c√≥digo a seguir mostra que o <code>tibble</code> criado possui tr√™s classes: <code>tbl_df</code>, <code>tbl</code> e <code>data.frame</code>. √â poss√≠vel observar que o <code>tibble</code> possui como classe comum o <code>data.frame</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">  <span class="kw">class</span>(df_escola)</a></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>Na subse√ß√£o subsequente, vamos explicar com detalhes como realizar a leitura, escrita e manipula√ß√£o de dados.</p>
<div id="tidyverse" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Tidyverse</h3>
<p>Com o intuito de desenvolver um conjunto de ferramentas para realizar a leitura, escrita, manipula√ß√£o e visualiza√ß√£o de dados, o estat√≠stico <span class="citation">Wickham (2017)</span> e seus colaboradores criaram o <a href="https://www.tidyverse.org/">Tidyverse</a>, o qual √© apresentado na Figura abaixo ao lado esquerdo. Ao lado direito, √© apresentado as etapas de um projeto de ci√™ncia de dados com aplica√ß√£o no mundo real <span class="citation">Schutt and O≈Éeil (2013)</span>.</p>
<div class="figure" style="text-align: center"><span id="fig:fig4"></span>
<img src="res/2_r/ds_process_2.png" alt="Conjunto de pacotes do kit de ferramentas e etapas de um projeto de ci√™ncia de dados" width="150%" />
<p class="caption">
Figure 2.4: Conjunto de pacotes do kit de ferramentas e etapas de um projeto de ci√™ncia de dados
</p>
</div>
<p>Neste minicurso, vamos usar os pacotes <code>readr</code>, <code>tibble</code>, <code>dplyr</code>, <code>magrittr</code> e <code>ggplot2</code>. O pacote <code>readr</code> √© utilizado para fazer leitura e escrita de dados. As pr√≥ximas subse√ß√µes descrevem com detalhes os pacotes citados.</p>
<div id="leitura-e-escrita-de-dados" class="section level4">
<h4><span class="header-section-number">2.1.1.1</span> Leitura e escrita de dados</h4>
<blockquote>
<p>No minicurso de <a href="https://dataat.github.io/introducao-analise-de-dados/introducao.html#dados">Introdu√ß√£o √† an√°lise de dados</a>, explicamos com detalhes a diferen√ßa entre cada formato de dados e suas respectivas aplica√ß√µes.</p>
</blockquote>
<p>Nesta subse√ß√£o, vamos criar um conjunto de dados, da seguinte forma:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">   <span class="co"># Cria√ß√£o do tibble</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">  df_solo &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">label =</span> <span class="kw">c</span>(<span class="st">&quot;Soja&quot;</span>, <span class="st">&quot;Milho&quot;</span>, <span class="st">&quot;Pastagem&quot;</span>, <span class="st">&quot;Vegeta√ß√£o&quot;</span>),</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">                              <span class="dt">plant_agri =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">                              <span class="dt">plat_col =</span> <span class="kw">c</span>(<span class="st">&quot;2019-09-01&quot;</span>, <span class="st">&quot;2019-01-10&quot;</span>, <span class="st">&quot;NA&quot;</span>, <span class="st">&quot;NA&quot;</span>))</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb7-7" data-line-number="7">  <span class="co"># Visualiza√ß√£o das observa√ß√µes iniciais do conjunto de dados</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8">  <span class="kw">head</span>(df_solo, <span class="dv">2</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   label plant_agri plat_col  
##   &lt;chr&gt; &lt;lgl&gt;      &lt;chr&gt;     
## 1 Soja  TRUE       2019-09-01
## 2 Milho TRUE       2019-01-10</code></pre>
<p>Podemos salvar os dados em diferentes formatos, sendo eles tabulares ou n√£o. Para salvar os dados no formato <code>json</code>, pode ser feito desta forma:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">  <span class="co"># Importa√ß√£o do pacote </span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">  <span class="kw">library</span>(jsonlite)</a></code></pre></div>
<pre><code>## Loading required package: methods</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">  <span class="co"># Transformando o tibble em json</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">  df_solo_json &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">toJSON</span>(df_solo, <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb11-4" data-line-number="4">  <span class="co"># Visualiza√ß√£o do json</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5">  df_solo_json</a></code></pre></div>
<pre><code>## [
##   {
##     &quot;label&quot;: &quot;Soja&quot;,
##     &quot;plant_agri&quot;: true,
##     &quot;plat_col&quot;: &quot;2019-09-01&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Milho&quot;,
##     &quot;plant_agri&quot;: true,
##     &quot;plat_col&quot;: &quot;2019-01-10&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Pastagem&quot;,
##     &quot;plant_agri&quot;: false,
##     &quot;plat_col&quot;: &quot;NA&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Vegeta√ß√£o&quot;,
##     &quot;plant_agri&quot;: false,
##     &quot;plat_col&quot;: &quot;NA&quot;
##   }
## ]</code></pre>
<p>Agora que o nosso dado est√° em <code>json</code>, podemos salv√°-lo, da seguinte maneira:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">  <span class="co"># Escrita dos dados em formato json no arquivo dados_do_solo.json</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">  jsonlite<span class="op">::</span><span class="kw">write_json</span>(df_solo_json, <span class="st">&quot;../data/5_arquivos_parte_r/dados_do_solo.json&quot;</span>)</a></code></pre></div>
<p>Para realizar a leitura:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">  <span class="co"># Leitura do arquivo em formato .json</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">  df_solo &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">read_json</span>(<span class="st">&quot;../data/5_arquivos_parte_r/dados_do_solo.json&quot;</span>, <span class="dt">simplifyVector =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb14-4" data-line-number="4">  <span class="co"># Visualiza√ß√£o dos dados</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">  <span class="kw">cat</span>(df_solo)</a></code></pre></div>
<pre><code>## [
##   {
##     &quot;label&quot;: &quot;Soja&quot;,
##     &quot;plant_agri&quot;: true,
##     &quot;plat_col&quot;: &quot;2019-09-01&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Milho&quot;,
##     &quot;plant_agri&quot;: true,
##     &quot;plat_col&quot;: &quot;2019-01-10&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Pastagem&quot;,
##     &quot;plant_agri&quot;: false,
##     &quot;plat_col&quot;: &quot;NA&quot;
##   },
##   {
##     &quot;label&quot;: &quot;Vegeta√ß√£o&quot;,
##     &quot;plant_agri&quot;: false,
##     &quot;plat_col&quot;: &quot;NA&quot;
##   }
## ]</code></pre>
<p>De forma semelhante a leitura e escrita do arquivo em formato <code>json</code>, podemos salvar nossos dados de solo em formato tabular, por√©m, vamos usar o pacote <code>readr</code>, da seguinte forma:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">  <span class="co"># Importa√ß√£o do pacote </span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">  <span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">  <span class="co"># Escrita dos dados em formato csv no arquivo dados_do_solo.csv</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5">  readr<span class="op">::</span><span class="kw">write_csv</span>(df_solo, <span class="st">&quot;../data/5_arquivos_parte_r/dados_do_solo.csv&quot;</span>)</a></code></pre></div>
<p>Para fazer a leitura:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">  <span class="co"># Leitura do arquivo em formato .csv</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">  df_solo_csv &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;../data/5_arquivos_parte_r/dados_do_solo.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   label = col_character(),
##   plant_agri = col_logical(),
##   plat_col = col_date(format = &quot;&quot;)
## )</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">  <span class="co"># Visualiza√ß√£o do conjunto de dados</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">  df_solo_csv</a></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   label     plant_agri plat_col  
##   &lt;chr&gt;     &lt;lgl&gt;      &lt;date&gt;    
## 1 Soja      TRUE       2019-09-01
## 2 Milho     TRUE       2019-01-10
## 3 Pastagem  FALSE      NA        
## 4 Vegeta√ß√£o FALSE      NA</code></pre>
<p>No entanto, nem tudo s√£o flores e t√£o simples quanto mostramos. Os m√©todos apresentados possuem diversos parametros que ajudam a lidar com dados mal formatados e ruidosos, ent√£o, salientamos que nosso exemplo √© de cunho acad√™mico. Como diz um dos criadores do <em>Tidyverse</em>:</p>
<blockquote>
<p>‚ÄúOs conjuntos de dados arrumados s√£o todos iguais, mas todos os conjuntos de dados desorganizados s√£o desorganizados √† sua pr√≥pria maneira.‚Äù - Hadley Wickham</p>
</blockquote>
</div>
</div>
<div id="manipulacao-de-dados" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Manipula√ß√£o de dados</h3>
<p>Nesta subse√ß√£o, vamos nos basear no nosso livro-texto de <a href="https://dataat.github.io/introducao-analise-de-dados/introducao-ao-r.html#manipulacao-de-dados">Introdu√ß√£o √† An√°lise de Dados</a>, fique √† vontade para contribuir com o material deste curso üôä.</p>
<p>Para selecionar, filtrar e agrupar nossos dados, vamos usar o pacote <code>dplyr</code>, o qual est√° contido no kit de ferramentas <code>Tidyverse</code>. Vamos iniciar criando mais um conjunto de dados:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">  <span class="co"># Cria√ß√£o do tibble</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2">  df_escola &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">    <span class="dt">id =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">    <span class="dt">curso =</span> <span class="kw">c</span>(<span class="st">&quot;Historia&quot;</span>, <span class="st">&quot;Historia&quot;</span>, <span class="st">&quot;Matem√°tica&quot;</span>,</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">                    <span class="st">&quot;Estat√≠stica&quot;</span>, <span class="st">&quot;Matem√°tica&quot;</span>, <span class="st">&quot;Estat√≠stica&quot;</span>),</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">    <span class="dt">media =</span> <span class="kw">c</span>(<span class="fl">2.1</span>, <span class="fl">3.5</span>, <span class="fl">4.0</span>, <span class="fl">1.0</span>, <span class="ot">NA</span>, <span class="fl">4.9</span>),</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">    <span class="dt">conceito =</span> <span class="kw">c</span>(<span class="st">&quot;C&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>,</a>
<a class="sourceLine" id="cb21-8" data-line-number="8">                        <span class="st">&quot;C&quot;</span>, <span class="st">&quot;NA&quot;</span>, <span class="st">&quot;A&quot;</span>))</a>
<a class="sourceLine" id="cb21-9" data-line-number="9"></a>
<a class="sourceLine" id="cb21-10" data-line-number="10">  knitr<span class="op">::</span><span class="kw">kable</span>(df_escola)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">curso</th>
<th align="right">media</th>
<th align="left">conceito</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Historia</td>
<td align="right">2.1</td>
<td align="left">C</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Historia</td>
<td align="right">3.5</td>
<td align="left">B</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Matem√°tica</td>
<td align="right">4.0</td>
<td align="left">A</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Estat√≠stica</td>
<td align="right">1.0</td>
<td align="left">C</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Matem√°tica</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Estat√≠stica</td>
<td align="right">4.9</td>
<td align="left">A</td>
</tr>
</tbody>
</table>
<p>Entre os diversos m√©todos ofericidos pelo pacote <code>dplyr</code>, vamos usar os seguintes:</p>
<ul>
<li><code>select</code> - Sele√ß√£o de atributos de um <strong>data.frame</strong> ou <strong>tibble</strong></li>
<li><code>filter</code> - Filtro de observa√ß√µes de acordo com uma l√≥gica pr√©-definida</li>
<li><code>mutate</code> - Cria√ß√£o de novos atributos</li>
<li><code>group_by</code> - Cria√ß√£o de grupos para aplica√ß√£o de fun√ß√µes de agrega√ß√£o</li>
<li><code>summarize</code> - Fun√ß√£o de agrega√ß√£o aplicada em grupos</li>
</ul>
<p>Vamos manipular nosso <code>tibble</code> com base nos m√©todos apresentados:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">  <span class="co"># importa√ß√£o do pacote dplyr</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2">  <span class="kw">suppressMessages</span>(<span class="kw">library</span>(dplyr))</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb22-4" data-line-number="4">  <span class="co"># Filtro dos alunos com conceito igual a &quot;A&quot;</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5">  filtro &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(df_escola, df_escola<span class="op">$</span>conceito <span class="op">==</span><span class="st"> &quot;A&quot;</span>)</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">   </a>
<a class="sourceLine" id="cb22-7" data-line-number="7">  <span class="co"># Sele√ß√£o dos atributos &quot;curso&quot;, &quot;conceito&quot; e &quot;media&quot;</span></a>
<a class="sourceLine" id="cb22-8" data-line-number="8">  selecao &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(filtro, curso, conceito, media)</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">    </a>
<a class="sourceLine" id="cb22-10" data-line-number="10">  <span class="co"># Cria√ß√£o de grupos por curso</span></a>
<a class="sourceLine" id="cb22-11" data-line-number="11">  grupo &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(selecao, curso)</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">   </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">  <span class="co"># Agrega√ß√£o dos cursos pela m√©dia</span></a>
<a class="sourceLine" id="cb22-14" data-line-number="14">  media &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(grupo, <span class="dt">media_grupo =</span> <span class="kw">mean</span>(media))</a>
<a class="sourceLine" id="cb22-15" data-line-number="15">    </a>
<a class="sourceLine" id="cb22-16" data-line-number="16">  <span class="co"># Visualiza√ß√£o dos dados</span></a>
<a class="sourceLine" id="cb22-17" data-line-number="17">  knitr<span class="op">::</span><span class="kw">kable</span>(media)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">curso</th>
<th align="right">media_grupo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Estat√≠stica</td>
<td align="right">4.9</td>
</tr>
<tr class="even">
<td align="left">Matem√°tica</td>
<td align="right">4.0</td>
</tr>
</tbody>
</table>
<p>Basicamente, filtramos pelo atributo <code>conceito</code>, selecionamos os atributos <code>curso</code>, <code>conceito</code> e <code>media</code>, agrupamos pelos cursos e tiramos a m√©dia dos grupos formados üêª. Mas, ficou muito grande, podemos diminuir a quantidade de atribui√ß√µes utilizando <code>pipe</code>, desta forma:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">  <span class="co"># importa√ß√£o do pacote magrittr</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2">  <span class="kw">library</span>(magrittr)</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb23-4" data-line-number="4">  <span class="co"># Uso do pipe (%&gt;%) para filtrar, selecionar, agrupar e aplicar fun√ß√£o de </span></a>
<a class="sourceLine" id="cb23-5" data-line-number="5">  <span class="co"># agrega√ß√£o</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6">  df &lt;-<span class="st"> </span>df_escola <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(conceito <span class="op">==</span><span class="st"> &quot;A&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-7" data-line-number="7"><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">select</span>(curso, conceito, media) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-8" data-line-number="8"><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(curso) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-9" data-line-number="9"><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(<span class="dt">media_grupo =</span> <span class="kw">mean</span>(media))</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">  </a>
<a class="sourceLine" id="cb23-11" data-line-number="11">  <span class="co"># Visualiza√ß√£o dos dados</span></a>
<a class="sourceLine" id="cb23-12" data-line-number="12">  knitr<span class="op">::</span><span class="kw">kable</span>(df)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">curso</th>
<th align="right">media_grupo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Estat√≠stica</td>
<td align="right">4.9</td>
</tr>
<tr class="even">
<td align="left">Matem√°tica</td>
<td align="right">4.0</td>
</tr>
</tbody>
</table>
<p>A principal fun√ß√£o do <strong>pipe</strong> √© tornar o c√≥digo mais limpo e reprodut√≠vel. Desta forma,
encerramos os m√©todos b√°sicos de manipula√ß√£o de dados. Na pr√≥xima subse√ß√£o, vamos usar o pacote
<code>sf</code> para a leitura, escrita e manipu√ß√£o de dados espaciais. # Introdu√ß√£o √† Geoci√™ncias üåé</p>
</div>
</div>
<div id="sf" class="section level2">
<h2><span class="header-section-number">2.2</span> SF</h2>
<p>O pacote <code>sf</code> <span class="citation">Pebesma (2018)</span> implementa as <code>simple features</code> explicadas no <a href="">cap√≠tulo 1</a> com base nas estruturas de <code>data.frame</code> ou <code>tibble</code>, as principais caracter√≠sticas do pacote pode ser vista na lista abaixo:
- Representa√ß√£o nativa em R de todos os 17 tipos das <code>simple features</code> para todas as dimens√µes (XY, XYZ, XYM, XYZM).
- Interface para o GEOS que suporta a DE9-IM.
- Interface para o <a href="https://gdal.org/">GDAL</a>, a qual fornece suporte para todas op√ß√µes de drivers, tipo de atributo <code>Date</code> e <code>DateTime</code> e sistema de coordenadas de refer√™ncia atrav√©s do <a href="https://proj.org/">PROJ</a>.
- Uso de serializa√ß√µes escritas em Rcpp para otimizar o I/O com GDAL e GEOS.
- Leitura e escrita de bancos de dados com extens√µes espaciais, por exemplo <a href="https://postgis.net/">PostGIS</a>.</p>
<blockquote>
<p>Lista retirada da <a href="https://r-spatial.github.io/sf/">p√°gina</a> de documenta√ß√£o do pacote <code>sf</code></p>
</blockquote>
<div id="tipos-geometricos" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Tipos Geom√©tricos</h3>
<p>Como apresentado no cap√≠tulo 1, podemos representar os tipos geom√©tricos com pontos, linhas e pol√≠gonos. Nesta subse√ß√£o, vamos apresentar alguns tipos geom√©tricos oferecidos pelo pacote <code>sf</code> que segue a implementa√ß√£o padr√£o da OGC. Para criarmos um simples <code>POINT</code>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">  <span class="co"># Impota√ß√£o do pacote</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">  <span class="kw">library</span>(sf)</a></code></pre></div>
<pre><code>## Linking to GEOS 3.5.1, GDAL 2.1.3, PROJ 4.9.3</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">  <span class="co"># Cria√ß√£o de um ponto no plano</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2">  ponto &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb26-4" data-line-number="4">  ponto</a></code></pre></div>
<pre><code>## POINT (3 4)</code></pre>
<p>Para criarmos uma <code>LINESTRING</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">  <span class="co"># Cria√ß√£o dos segmentos de reta</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2">  linha &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">8</span>, <span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">2</span>) )</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"></a>
<a class="sourceLine" id="cb28-4" data-line-number="4">  <span class="co"># Cria√ß√£o do linestring</span></a>
<a class="sourceLine" id="cb28-5" data-line-number="5">  linestring &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(linha)</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb28-7" data-line-number="7">  linestring</a></code></pre></div>
<pre><code>## LINESTRING (2 1, 4 4, 8 2, 4 2)</code></pre>
<p>Por fim, para criarmos um pol√≠gono sem buracos:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">  <span class="co"># Cria√ß√£o dos segmentos de reta</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">  poligono &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb30-3" data-line-number="3"></a>
<a class="sourceLine" id="cb30-4" data-line-number="4">  <span class="co"># Cria√ß√£o do poligono</span></a>
<a class="sourceLine" id="cb30-5" data-line-number="5">  polygon &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono))</a>
<a class="sourceLine" id="cb30-6" data-line-number="6"></a>
<a class="sourceLine" id="cb30-7" data-line-number="7">  polygon</a></code></pre></div>
<pre><code>## POLYGON ((2 1, 1 2, 1 5, 5 3, 2 1))</code></pre>
<p>Os tipos geom√©tricos criados s√£o apresentados abaixo:</p>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>Como apresentado no cap√≠tulo 1, os tipos geom√©tricos podem ser usados em conjunto: <code>MULTIPOINT</code>, <code>MULTILINESTRING</code>, <code>MULTIPOLYGON</code> e <code>GEOMETRYCOLLECTION</code>. O trecho de c√≥digo abaixo apresenta a cri√ß√£o dos tipos mencionados:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">  <span class="co"># Cria√ß√£o de pontos</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2">  pontos &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb32-3" data-line-number="3"></a>
<a class="sourceLine" id="cb32-4" data-line-number="4">  <span class="co"># Cria√ß√£o do tipo geom√©trico multipoint</span></a>
<a class="sourceLine" id="cb32-5" data-line-number="5">  multipoint &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_multipoint</span>(pontos)</a>
<a class="sourceLine" id="cb32-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb32-7" data-line-number="7">  <span class="co"># Cria√ß√£o dos segmentos de reta</span></a>
<a class="sourceLine" id="cb32-8" data-line-number="8">  linhas_s1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb32-9" data-line-number="9">  linhas_s2 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb32-10" data-line-number="10">  </a>
<a class="sourceLine" id="cb32-11" data-line-number="11">  <span class="co"># Cria√ß√£o do tipo geom√©trico multiline</span></a>
<a class="sourceLine" id="cb32-12" data-line-number="12">  multilinestring &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_multilinestring</span>(<span class="kw">list</span>(linhas_s1, linhas_s2))</a>
<a class="sourceLine" id="cb32-13" data-line-number="13">  </a>
<a class="sourceLine" id="cb32-14" data-line-number="14">  </a>
<a class="sourceLine" id="cb32-15" data-line-number="15">  <span class="co"># Cri√ß√£o dos pol√≠gonos</span></a>
<a class="sourceLine" id="cb32-16" data-line-number="16">  poligono_p1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb32-17" data-line-number="17">  poligono_p2 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb32-18" data-line-number="18">  poligono_p2_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">4</span>))</a>
<a class="sourceLine" id="cb32-19" data-line-number="19">  </a>
<a class="sourceLine" id="cb32-20" data-line-number="20">  <span class="co"># Cria√ß√£o do tipo geom√©trico multipolygon</span></a>
<a class="sourceLine" id="cb32-21" data-line-number="21">  multipolygon &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_multipolygon</span>(<span class="kw">list</span>(<span class="kw">list</span>(poligono_p1), <span class="kw">list</span>(poligono_p2, poligono_p2_<span class="dv">1</span>)))</a>
<a class="sourceLine" id="cb32-22" data-line-number="22">  </a>
<a class="sourceLine" id="cb32-23" data-line-number="23">  <span class="co"># Cria√ß√£o do tipo geom√©trico </span></a>
<a class="sourceLine" id="cb32-24" data-line-number="24">  geometrycollection &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_geometrycollection</span>(<span class="kw">list</span>(multipoint, multilinestring, multipolygon))</a></code></pre></div>
<p>Os tipos geom√©tricos criados s√£o apresentados abaixo:</p>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>OS tipos geom√©tricos que criamos s√£o objetos da classe <code>sfg</code> (<em>Simple Feature Geometries</em>), os quis possuem apenas um √∫nico atributo, correspondes aos pontos no plano ou espa√ßo. Para verificar a classe dos objetos:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">  <span class="co"># Verifica√ß√£o da classe do tipo geom√©trico criado </span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2">  <span class="kw">class</span>(multipoint)</a></code></pre></div>
<pre><code>## [1] &quot;XY&quot;         &quot;MULTIPOINT&quot; &quot;sfg&quot;</code></pre>
<p>Podemos representar uma lista de tipos geom√©tricos com a classe <code>sfc</code> (<em>Simple Feature Columns</em>), a qual cria atributos de objetos <code>sfg</code>, por exemplo:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">  <span class="co"># Defini√ß√£o dos pontos</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2">  ponto_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb35-3" data-line-number="3">  linha_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>))</a>
<a class="sourceLine" id="cb35-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb35-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos objetos sfg</span></a>
<a class="sourceLine" id="cb35-6" data-line-number="6">  point &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_point</span>(ponto_<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb35-7" data-line-number="7">  linestring &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(linha_<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb35-8" data-line-number="8">  </a>
<a class="sourceLine" id="cb35-9" data-line-number="9">  <span class="co"># Cria√ß√£o de um objeto sfc</span></a>
<a class="sourceLine" id="cb35-10" data-line-number="10">  sfc_obj &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_sfc</span>(point, linestring)</a>
<a class="sourceLine" id="cb35-11" data-line-number="11">  </a>
<a class="sourceLine" id="cb35-12" data-line-number="12">  sfc_obj</a></code></pre></div>
<pre><code>## Geometry set for 2 features 
## geometry type:  GEOMETRY
## dimension:      XY
## bbox:           xmin: 1 ymin: 2 xmax: 3 ymax: 4
## epsg (SRID):    NA
## proj4string:    NA</code></pre>
<pre><code>## POINT (2 4)</code></pre>
<pre><code>## LINESTRING (1 2, 3 4)</code></pre>
<p>Observe que, diferentemente dos tipos geom√©tricos da classe <code>sfg</code>, a classe <code>sfc</code> apresenta diferentes caracter√≠sticas, como a proje√ß√£o <code>proj4string</code>, ID do sistema de refer√™ncia geogr√°fica <code>epsg</code>, <em>bolding box</em> <code>bbox</code> e a dimens√£o <code>dimension</code>.</p>
<p>No dia-a-dia vamos trabalhar com dados vetoriais provindos de diversas fontes, como IBGE e INPE. Logo, n√£o vamos precisar criar nossos tipos geom√©tricos e sim realizar a leitura dos arquivos que recebemos. Na subse√ß√£o seguinte, vamos aprender como fazer a leitura de arquivos vetoriais.</p>
</div>
<div id="leitura-e-escrita-de-dados-vetoriais" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Leitura e escrita de dados vetoriais</h3>
<p>Os dados usados nesta subse√ß√£o se encontram dispon√≠veis em <code>data</code> neste diret√≥rio. O c√≥digo abaixo apresenta a leitura do arquivo vetorial que cont√™m os estados brasileiros:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">  <span class="co"># Leitura do arquivos .shp que cont√™m as unidades federativas  </span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2">  shp_brazil &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">read_sf</span>(<span class="st">&quot;../data/1_estados_do_brasil_shape/Brasil.shp&quot;</span>)  </a>
<a class="sourceLine" id="cb39-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb39-4" data-line-number="4">  <span class="co"># Visualiza√ß√£o dos atributos .shp</span></a>
<a class="sourceLine" id="cb39-5" data-line-number="5">  <span class="kw">head</span>(shp_brazil, <span class="dv">4</span>)</a></code></pre></div>
<pre><code>## Simple feature collection with 4 features and 4 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.99094 ymin: -11.14449 xmax: -35.15167 ymax: 4.437122
## epsg (SRID):    NA
## proj4string:    +proj=longlat +ellps=aust_SA +no_defs
## # A tibble: 4 x 5
##   ESTADOS   REGIAO COD_UF UF                                       geometry
##   &lt;chr&gt;     &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;                          &lt;MULTIPOLYGON [¬∞]&gt;
## 1 Acre      Norte      12 AC    (((-73.80098 -7.111453, -73.74084 -7.14318‚Ä¶
## 2 Alagoas   Norde‚Ä¶     27 AL    (((-36.39119 -10.50082, -36.39864 -10.4978‚Ä¶
## 3 &quot;Amap\xe‚Ä¶ Norte      16 AP    (((-51.3738 -0.3705301, -51.37337 -0.36712‚Ä¶
## 4 Amazonas  Norte      13 AM    (((-73.80098 -7.111453, -73.80106 -7.11128‚Ä¶</code></pre>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Verifica√ß√£o da classe do arquivo:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">  <span class="kw">class</span>(shp_brazil)</a></code></pre></div>
<pre><code>## [1] &quot;sf&quot;         &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>Diferentemente dos tipos geom√©tricos que criamos anteriormente (<code>sfg</code>), objetos da classe <code>sf</code> possuem atributos que correspondem ao tipo geom√©tricos e as caracter√≠sticas do dado vetorial, ou seja, s√£o um jun√ß√£o entre as classes <code>sfg</code>e <code>sfc</code>. Por exemplo, √© poss√≠vel observar o tipo geom√©trico dos estados brasileiros (<code>MULTIPOLYGON</code>), bem como as regi√µes de cada estado (<code>REGIAO</code>), representadas por um atributo discreto.</p>
<p>O pacote <code>sf</code>, utilizando como base o <code>GDAL</code>, fornece suporte de leitura e escrita para diversos formatos, tais como: <strong>GeoJSON</strong> e <strong>KML</strong>. O c√≥digo abaixo mostra como salvar os tipos geom√©tricos de criamos anteriormente:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">  <span class="co"># Transformando para texto</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2">  gc_text &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb43-3" data-line-number="3"><span class="st">  </span>sf<span class="op">::</span><span class="kw">st_as_text</span>(geometrycollection)</a>
<a class="sourceLine" id="cb43-4" data-line-number="4"></a>
<a class="sourceLine" id="cb43-5" data-line-number="5">  <span class="co"># Transformando para objeto sfc</span></a>
<a class="sourceLine" id="cb43-6" data-line-number="6">  gc_sfc &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_as_sfc</span>(gc_text)</a>
<a class="sourceLine" id="cb43-7" data-line-number="7">  </a>
<a class="sourceLine" id="cb43-8" data-line-number="8">  <span class="co"># Escrita do tipo geom√©trico geometry collection em .shp</span></a>
<a class="sourceLine" id="cb43-9" data-line-number="9">  sf<span class="op">::</span><span class="kw">write_sf</span>(gc_sfc, <span class="st">&quot;./dados/geometrycollection_curso.shp&quot;</span>)</a></code></pre></div>
<p>Um breve resumos das classes do pacote <strong>SF</strong>:</p>
<ul>
<li><code>sfg</code> √önico objeto geom√©trico, por exemplo, <code>POINT</code>.</li>
<li><code>sfc</code> Jun√ß√£o de tipos geom√©tricos da classe <code>sfg</code>. Possui informa√ß√µes como proje√ß√£o e sistema de refer√™ncia geog≈ïafica.</li>
<li><code>sf</code> Jun√ß√£o das classes <code>sfg</code> e <code>sfc</code>. Cont√™m atributos correspondes ao tipo geom√©tricos, bem como atributos discretos, categ√≥ricos que representam caracter√≠sticas do objeto.</li>
</ul>
<p>Agora que aprendemos a diferen√ßa entre cada classe do pacote <code>sf</code> e como fazer a leitura e escrita de dados vetoriais, na subse√ß√£o seguinte vamos aprender sobre os relacionamentos espaciais, de acordo com a Matriz de 9-interse√ß√µes Estendida Dimensionalmente (DE-9IM).</p>
</div>
<div id="relacionamentos-espaciais-1" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Relacionamentos Espaciais</h3>
<p>Para realizar a an√°lise de dados espaciais √© necess√°rio o uso de diversos m√©todos espaciais, com a finalidade de verificar se dois objetos possuem alguma rela√ß√£o, por exemplo, para identificar a quantidade de focos de queimada no estado de S√£o Paulo. Assim, o uso de tais m√©todos se tornam indispens√°veis durante a manipula√ß√£o de dados espaciais.</p>
<p>Os m√©todos apresentados nesta subse√ß√£o:</p>
<ul>
<li><p><code>Equals</code> - Verifica se duas geom√©trias s√£o iguais;</p></li>
<li><p><code>Disjoint</code> - Verifica se duas geom√©trias s√£o disjuntas;</p></li>
<li><p><code>Touches</code> - Verifica se duas geom√©tricas se tocam;</p></li>
<li><p><code>Crosses</code> - Verifica se duas geom√©tricas se cruzam;</p></li>
<li><p><code>Within</code>- Verifica se a geom√©tria A est√° contida em B;</p></li>
<li><p><code>Contains</code> - Verifica se a geom√©tria B cont√™m;</p></li>
<li><p><code>Overleaps</code> - Verifica se duas geom√©trias se sobrep√µem;</p></li>
<li><p><code>Intersects</code> - Verifica se duas geom√©tricas se interseccionam.</p></li>
</ul>
<div id="equals" class="section level4">
<h4><span class="header-section-number">2.2.3.1</span> Equals</h4>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">  <span class="co"># Defini√ß√£o dos pontos</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2">  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb44-3" data-line-number="3">  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>),</a>
<a class="sourceLine" id="cb44-4" data-line-number="4">                      <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">1</span>),</a>
<a class="sourceLine" id="cb44-5" data-line-number="5">                      <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb44-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb44-7" data-line-number="7">  <span class="co"># Cria√ß√£o dos tipos geom√©tricos</span></a>
<a class="sourceLine" id="cb44-8" data-line-number="8">  polygon_a &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb44-9" data-line-number="9">  polygon_b &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>Para saber se duas geom√©trias s√£o iguais, usa-se o m√©todos <code>st_equals</code>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">  <span class="co"># Verifica se duas geom√©trias s√£o iguais</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_equals</span>(polygon_a, polygon_b, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##       [,1]
## [1,] FALSE</code></pre>
<p>O retorno do m√©todo √© um lista com tamanho 1, com valores bin√°rios, <strong>TRUE</strong> ou <strong>FALSE</strong>. Desta forma, os pol√≠gonos criados n√£o s√£o iguais, pois o pol√≠gono B possui mais pontos. O c√≥digo abaixo a apresenta a verifica√ß√£o de dois pontos:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">  <span class="co"># Cria√ß√£o dos pontos</span></a>
<a class="sourceLine" id="cb47-2" data-line-number="2">  ponto_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb47-3" data-line-number="3">  ponto_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">    <span class="co"># Verifica se duas geom√©trias s√£o iguais</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_equals</span>(ponto_<span class="dv">1</span>, ponto_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
<blockquote>
<p>Para verificar se duas geom√©tricas s√£o exatamente iguais, use <code>st_equals_exact</code>.</p>
</blockquote>
</div>
<div id="disjoint" class="section level4">
<h4><span class="header-section-number">2.2.3.2</span> Disjoint</h4>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">  <span class="co"># Cria√ß√£o dos linestrings</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2">  segmento_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="fl">1.5</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb50-3" data-line-number="3">  segmento_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>))</a>
<a class="sourceLine" id="cb50-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb50-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos tipos geom√©tricos linestring</span></a>
<a class="sourceLine" id="cb50-6" data-line-number="6">  linestring_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb50-7" data-line-number="7">  linestring_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">2</span>)</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<p>Para saber se duas geom√©trias s√£o disjuntas, usa-se o m√©todos <code>st_disjoint</code>:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">  <span class="co"># Verifica se duas geom√©trias s√£o disjuntas</span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_disjoint</span>(linestring_<span class="dv">1</span>,linestring_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
<p>Outro exemplo:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1">    <span class="co"># Cria√ß√£o dos pol√≠gonos</span></a>
<a class="sourceLine" id="cb53-2" data-line-number="2">  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>),</a>
<a class="sourceLine" id="cb53-3" data-line-number="3">                      <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb53-4" data-line-number="4">  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">2</span>),</a>
<a class="sourceLine" id="cb53-5" data-line-number="5">                      <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb53-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb53-7" data-line-number="7">  <span class="co"># Cria√ß√£o dos tipos geom√©tricos polygons</span></a>
<a class="sourceLine" id="cb53-8" data-line-number="8">  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb53-9" data-line-number="9">  polygon_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">    <span class="co"># Verifica se duas geom√©trias s√£o disjuntas</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2">   sf<span class="op">::</span><span class="kw">st_disjoint</span>(polygon_<span class="dv">1</span>,polygon_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##       [,1]
## [1,] FALSE</code></pre>
</div>
<div id="touches" class="section level4">
<h4><span class="header-section-number">2.2.3.3</span> Touches</h4>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">  <span class="co"># Cria√ß√£o dos pol√≠gonos</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2">  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb56-3" data-line-number="3">  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb56-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb56-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos tipos geom√©tricos</span></a>
<a class="sourceLine" id="cb56-6" data-line-number="6">  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb56-7" data-line-number="7">  polygon_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>Para verificar se duas geom√©trias se tocam, usa-se o m√©todo <code>st_touches</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">    <span class="co"># Verifica se duas geom√©trias se tocam</span></a>
<a class="sourceLine" id="cb57-2" data-line-number="2">    sf<span class="op">::</span><span class="kw">st_touches</span>(polygon_<span class="dv">1</span>, polygon_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
<p>Outro exemplo:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1">  <span class="co"># Cria√ß√£o dos segmentos</span></a>
<a class="sourceLine" id="cb59-2" data-line-number="2">  segmento_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">8</span>))</a>
<a class="sourceLine" id="cb59-3" data-line-number="3">  segmento_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">9</span>))</a>
<a class="sourceLine" id="cb59-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb59-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos tipos geom√©tricos</span></a>
<a class="sourceLine" id="cb59-6" data-line-number="6">  linestring_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb59-7" data-line-number="7">  linestring_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">2</span>)</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">  <span class="co"># Verifica se duas geom√©trias se tocam</span></a>
<a class="sourceLine" id="cb60-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_touches</span>(linestring_<span class="dv">1</span>, linestring_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##       [,1]
## [1,] FALSE</code></pre>
</div>
<div id="crosses" class="section level4">
<h4><span class="header-section-number">2.2.3.4</span> Crosses</h4>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1">  <span class="co"># Cria√ß√£o da reta e pol√≠gono</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2">  segmento_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">11</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">13</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">13</span>,<span class="dv">6</span>))</a>
<a class="sourceLine" id="cb62-3" data-line-number="3">  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">12</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">12</span>,<span class="dv">7</span>), <span class="kw">c</span>(<span class="dv">15</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">12</span>,<span class="dv">4</span>))</a>
<a class="sourceLine" id="cb62-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb62-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos objetos geom√©tricos</span></a>
<a class="sourceLine" id="cb62-6" data-line-number="6">  linestring_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb62-7" data-line-number="7">  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
<p>Para verificar se duas geom√©trias se tocam, usa-se o m√©todo <code>st_touches</code>:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1">  <span class="co"># Verifica se duas geom√©trias se cruzam</span></a>
<a class="sourceLine" id="cb63-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_crosses</span>(linestring_<span class="dv">1</span>, polygon_<span class="dv">1</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
<p>Outro exemplo:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1">  <span class="co"># Cria√ß√£o da reta e dos pontos</span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2">  segmento_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb65-3" data-line-number="3">  ponto_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb65-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb65-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos objetos geom√©tricos</span></a>
<a class="sourceLine" id="cb65-6" data-line-number="6">  linestring_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb65-7" data-line-number="7">  multipoint_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_multipoint</span>(ponto_<span class="dv">1</span>)</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-47-1.png" width="672" /></p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1">    <span class="co"># Verifica se duas geom√©trias se cruzam</span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2">    sf<span class="op">::</span><span class="kw">st_crosses</span>(linestring_<span class="dv">1</span>, multipoint_<span class="dv">1</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
</div>
<div id="within" class="section level4">
<h4><span class="header-section-number">2.2.3.5</span> Within</h4>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">  <span class="co"># Cria√ß√£o dos pol√≠gonos  </span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2">  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb68-3" data-line-number="3">  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb68-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb68-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos objetos geom√©tricos</span></a>
<a class="sourceLine" id="cb68-6" data-line-number="6">  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb68-7" data-line-number="7">  polygon_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<p>Para verificar se o pol√≠gono 1 est√° dentro do pol√≠gono 2, usa-se o m√©todo <code>st_within</code>:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1">      <span class="co"># Verifica se o poligono 1 est√° dentro do pol√≠gono 2</span></a>
<a class="sourceLine" id="cb69-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_within</span>(polygon_<span class="dv">1</span>, polygon_<span class="dv">2</span>, <span class="dt">sparse=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
</div>
<div id="contains" class="section level4">
<h4><span class="header-section-number">2.2.3.6</span> Contains</h4>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">  <span class="co"># Cria√ß√£o do ponto e do pol√≠gono  </span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2">  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">9</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">9</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">6</span>))</a>
<a class="sourceLine" id="cb71-3" data-line-number="3">  ponto_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">8</span>)</a>
<a class="sourceLine" id="cb71-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb71-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos tipos geom√©tricos</span></a>
<a class="sourceLine" id="cb71-6" data-line-number="6">  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb71-7" data-line-number="7">  point_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_point</span>(ponto_<span class="dv">1</span>)</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
<p>Para verificar se o pol√≠gono 1 cont√©m o ponto 1, usa-se o m√©todo <code>st_contains</code>:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">   <span class="co"># Verifica se o poligono 1 cont√©m o ponto 1</span></a>
<a class="sourceLine" id="cb72-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_contains</span>(polygon_<span class="dv">1</span>, point_<span class="dv">1</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
</div>
<div id="overlaps" class="section level4">
<h4><span class="header-section-number">2.2.3.7</span> Overlaps</h4>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1">  <span class="co"># Cria√ß√£o dos pol√≠gonos</span></a>
<a class="sourceLine" id="cb74-2" data-line-number="2">  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb74-3" data-line-number="3">  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">13</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">13</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">13</span>,<span class="dv">1</span> ))</a>
<a class="sourceLine" id="cb74-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb74-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos tipos geom√©tricos</span></a>
<a class="sourceLine" id="cb74-6" data-line-number="6">  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb74-7" data-line-number="7">  polygon_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<p>Para verificar se o pol√≠gono 1 sobrep√µe o pol√≠gono 2, usa-se o m√©todo <code>st_overlaps</code>:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1">  <span class="co"># Verifica se o poligono 1 sobrep√µe o poligono 2</span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_overlaps</span>(polygon_<span class="dv">1</span>, polygon_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
<p>Outro exemplo:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1">  <span class="co"># Cria√ß√£o das retas</span></a>
<a class="sourceLine" id="cb77-2" data-line-number="2">  segmento_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">12</span>,<span class="dv">8</span>))</a>
<a class="sourceLine" id="cb77-3" data-line-number="3">  segmento_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">11</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">11</span>,<span class="dv">9</span>))</a>
<a class="sourceLine" id="cb77-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb77-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos tipos geom√©tricos</span></a>
<a class="sourceLine" id="cb77-6" data-line-number="6">  linestring_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb77-7" data-line-number="7">  linestring_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_linestring</span>(segmento_<span class="dv">2</span>)</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1">    <span class="co"># Verifica se a linestring 1 sobrep√µe a linestring 2</span></a>
<a class="sourceLine" id="cb78-2" data-line-number="2">    sf<span class="op">::</span><span class="kw">st_overlaps</span>(linestring_<span class="dv">1</span>, linestring_<span class="dv">2</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span> )</a></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
</div>
<div id="intersects" class="section level4">
<h4><span class="header-section-number">2.2.3.8</span> Intersects</h4>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1">  <span class="co"># Cria√ß√£o dos pol√≠gonos</span></a>
<a class="sourceLine" id="cb80-2" data-line-number="2">  poligono_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">7</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">9</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">9</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">7</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">7</span>))</a>
<a class="sourceLine" id="cb80-3" data-line-number="3">  poligono_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">8</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">6</span>))</a>
<a class="sourceLine" id="cb80-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb80-5" data-line-number="5">  <span class="co"># Cria√ß√£o dos tipos geom√©tricos</span></a>
<a class="sourceLine" id="cb80-6" data-line-number="6">  polygon_<span class="dv">1</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb80-7" data-line-number="7">  polygon_<span class="dv">2</span> &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_polygon</span>(<span class="kw">list</span>(poligono_<span class="dv">2</span>))</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>Para verificar se o pol√≠gono 1 intersecta o pol√≠gono 2, usa-se o m√©todo <code>st_intersects</code>:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1">  sf<span class="op">::</span><span class="kw">st_intersects</span>(polygon_<span class="dv">1</span>, polygon_<span class="dv">2</span>, <span class="dt">sparse=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE</code></pre>
</div>
</div>
<div id="operadores-metricos" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Operadores M√©tricos</h3>
<p>Os operadores e os dados apresentados nesta subse√ß√£o, est√£o presentes na se√ß√£o de <a href=""><strong>Python</strong></a> e <a href=""><strong>PostGIS</strong></a>. A se√ß√£o em <strong>Python</strong> cobre com mais detalhes cada operador. Nesta subse√ß√£o vamos usar tais operadores m√©tricos:
- <code>st_area</code> - √Årea de um tipo geom√©trico poligonal
- <code>st_length</code> - Comprimento de tipos geom√©tricos 1D (<code>LINESTRING</code>)</p>
<div id="area" class="section level4">
<h4><span class="header-section-number">2.2.4.1</span> √Årea</h4>
<p>Vamos calcular a √°rea do estado de estado do Rio de Janeiro, para isso vamos utilizar tudo que aprendemos at√© agora:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1">  <span class="co"># Importa√ß√£o do ggplot2 para visualiza√ß√£o de dados</span></a>
<a class="sourceLine" id="cb83-2" data-line-number="2">  <span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb83-3" data-line-number="3">  <span class="co"># Leitura do shp que cont√©m os estados brasileiros</span></a>
<a class="sourceLine" id="cb83-4" data-line-number="4">  shp_brazil &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">read_sf</span>(<span class="st">&quot;../data/1_estados_do_brasil_shape/Brasil.shp&quot;</span>)  </a>
<a class="sourceLine" id="cb83-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb83-6" data-line-number="6">  <span class="co"># Sele√ß√£o do estado do Rio de Janeiro</span></a>
<a class="sourceLine" id="cb83-7" data-line-number="7">  estado_rj &lt;-<span class="st"> </span>shp_brazil <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(ESTADOS<span class="op">==</span><span class="st">&quot;Rio de Janeiro&quot;</span>)</a>
<a class="sourceLine" id="cb83-8" data-line-number="8">  </a>
<a class="sourceLine" id="cb83-9" data-line-number="9">  <span class="co"># Visualiza√ß√£o </span></a>
<a class="sourceLine" id="cb83-10" data-line-number="10">  ggplot2<span class="op">::</span><span class="kw">theme_set</span>(ggplot2<span class="op">::</span><span class="kw">theme_bw</span>())</a>
<a class="sourceLine" id="cb83-11" data-line-number="11">  ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb83-12" data-line-number="12"><span class="st">    </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> estado_rj) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb83-13" data-line-number="13"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Longitude&quot;</span>,</a>
<a class="sourceLine" id="cb83-14" data-line-number="14">         <span class="dt">y =</span> <span class="st">&quot;Latitude&quot;</span>,</a>
<a class="sourceLine" id="cb83-15" data-line-number="15">         <span class="dt">title =</span> <span class="st">&quot;Limites do estado do Rio de Janeiro&quot;</span>)</a></code></pre></div>
<p><img src="intro-analise-de-dados-espaciais_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1">  <span class="co"># C√°lculo da √°rea em metros quadrados</span></a>
<a class="sourceLine" id="cb84-2" data-line-number="2">  area_rj &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_area</span>(estado_rj)</a>
<a class="sourceLine" id="cb84-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb84-4" data-line-number="4">  area_rj</a></code></pre></div>
<pre><code>## 43791834545 [m^2]</code></pre>
<p>Podemos converter a √°rea para <span class="math inline">\(Km^2\)</span> para facilitar a compara√ß√£o dos resultados.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1">  <span class="co"># Convers√£o para km^2</span></a>
<a class="sourceLine" id="cb86-2" data-line-number="2">  area_rj &lt;-<span class="st"> </span>area_rj<span class="op">/</span><span class="fl">1e+6</span></a>
<a class="sourceLine" id="cb86-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb86-4" data-line-number="4">  area_rj</a></code></pre></div>
<pre><code>## 43791.83 [m^2]</code></pre>
<p>Segundo o <a href="https://www.ibge.gov.br/home/geociencias/areaterritorial/principal.shtm">IBGE</a> (Instituto Brasileiro de Geografia e Estat√≠stica), a √°rea do estado do Rio de Janeiro correspnde a <span class="math inline">\(43.781,588 Km^2\)</span> e a √°rea da retornada pela nossa consulta <span class="math inline">\(43.791,83 Km^2\)</span>. A diferen√ßa foi relativamente baixa, mostrando a efic√°cia do m√©todo no c√°lculo da √°rea.</p>
</div>
<div id="comprimento" class="section level4">
<h4><span class="header-section-number">2.2.4.2</span> Comprimento</h4>
<p>Assim como a √°rea, vamos utilizar todos os conceitos vistos at√© agora no minicurso. Vamos medir o comprimento do <a href="https://pt.wikipedia.org/wiki/Rio_Para%C3%ADba_do_Sul">Rio Para√≠ba do Sul</a>, o trecho de c√≥digo abaixo apresenta a leitura dos rios de todo o territ√≥rio brasileiro:</p>
<blockquote>
<p>Todos os dados usados neste minicurso est√£o no diret√≥rio <code>data</code></p>
</blockquote>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1">  <span class="co"># Leitura do shapefile   </span></a>
<a class="sourceLine" id="cb88-2" data-line-number="2">  rios_brazil &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">read_sf</span>(<span class="st">&quot;../data/4_rios_brasil/Brasil_rios.shp&quot;</span>)</a>
<a class="sourceLine" id="cb88-3" data-line-number="3">  <span class="co"># Visualiza√ß√£o dos dados</span></a>
<a class="sourceLine" id="cb88-4" data-line-number="4">  <span class="kw">head</span>(rios_brazil, <span class="dv">4</span>)</a></code></pre></div>
<pre><code>## Simple feature collection with 4 features and 7 fields
## geometry type:  MULTILINESTRING
## dimension:      XY
## bbox:           xmin: -67.34078 ymin: -6.052164 xmax: -36.73497 ymax: 1.997553
## epsg (SRID):    NA
## proj4string:    +proj=longlat +ellps=aust_SA +no_defs
## # A tibble: 4 x 8
##   OBJECTID IDRIO CORIO NORIOCOMP NUDISTBACR NUCOMPRIO DSVERSAO
##      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;   
## 1        1 47715 7516‚Ä¶ Rio Cani‚Ä¶       63.8     134.  BHO 201‚Ä¶
## 2        2 35341 7522‚Ä¶ Riacho C‚Ä¶      346.       42.1 BHO 201‚Ä¶
## 3        3 36318 7561‚Ä¶ Riacho C‚Ä¶      116.       45.9 BHO 201‚Ä¶
## 4        4 50455 48_0  Rio Negro     1430.     1347.  BHO 201‚Ä¶
## # ‚Ä¶ with 1 more variable: geometry &lt;MULTILINESTRING [¬∞]&gt;</code></pre>
<p>Vamos filtrar pelo Rio Para√≠ba do Sul:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1">  <span class="co"># Filtro do rio paraiba do sul</span></a>
<a class="sourceLine" id="cb90-2" data-line-number="2">  rio_paraiba &lt;-<span class="st"> </span>rios_brazil <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(NORIOCOMP <span class="op">==</span><span class="st"> &quot;Rio Para√≠ba do Sul&quot;</span>)</a>
<a class="sourceLine" id="cb90-3" data-line-number="3"></a>
<a class="sourceLine" id="cb90-4" data-line-number="4">  <span class="co"># Comprimeiro do rio paraiba do sul</span></a>
<a class="sourceLine" id="cb90-5" data-line-number="5">  rio_paraiba_comp &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_length</span>(rio_paraiba)</a>
<a class="sourceLine" id="cb90-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb90-7" data-line-number="7">  rio_paraiba_comp</a></code></pre></div>
<pre><code>## 868441.2 [m]</code></pre>
<p>Para fazer a convers√£o vamos utilizar o pacote <code>units</code>:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1">  <span class="co"># Importa√ß√£o  do pacote units</span></a>
<a class="sourceLine" id="cb92-2" data-line-number="2">  <span class="kw">library</span>(units)</a></code></pre></div>
<pre><code>## udunits system database from /usr/share/xml/udunits</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1">  <span class="co"># Convers√£o para km</span></a>
<a class="sourceLine" id="cb94-2" data-line-number="2">  rio_paraiba_comp &lt;-<span class="st"> </span>units<span class="op">::</span><span class="kw">set_units</span>(rio_paraiba_comp, km)</a>
<a class="sourceLine" id="cb94-3" data-line-number="3"></a>
<a class="sourceLine" id="cb94-4" data-line-number="4">  rio_paraiba_comp</a></code></pre></div>
<pre><code>## 868.4412 [km]</code></pre>
<p>Segundo a <a href="https://pt.wikipedia.org/wiki/Listas_de_rios_do_Brasil">Wikipedia</a>, o comprimento do Rio Para√≠ba do Sul correponde a <span class="math inline">\(1.137 Km\)</span> e o nosso m√©todo obteve <span class="math inline">\(\approx 868 Km\)</span>.</p>
<blockquote>
<p>Os exerc√≠cios apresentados foram retirados do material da disciplina de <a href="https://github.com/gqueiroz/cap349">Banco de Dados Geogr√°ficos</a></p>
</blockquote>
</div>
</div>
<div id="sistemas-de-referencias" class="section level3">
<h3><span class="header-section-number">2.2.5</span> Sistemas de refer√™ncias</h3>
<p>Como apresentado no cap√≠tulo 1, podemos representar nossos dados espaciais utilizando diversos tipos de proje√ß√µes. Desta forma, nesta subse√ß√£o vamos aprender como realizar a convers√£o e a transforma√ß√£o dos nossos dados. O trecho de c√≥digo abaixo mostra como verificar qual a proje√ß√£o dos nossos dados.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1">  <span class="co"># Verifica o sistema de referencia geogr√°fica</span></a>
<a class="sourceLine" id="cb96-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_crs</span>(shp_brazil)</a></code></pre></div>
<pre><code>## Coordinate Reference System:
##   No EPSG code
##   proj4string: &quot;+proj=longlat +ellps=aust_SA +no_defs&quot;</code></pre>
<p>O trecho de c√≥digo acima mostra que nenhum <strong>EPSG</strong> foi definido, para conveter podemos usar o mesmo m√©todo:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1">  <span class="co"># Convers√£o do sistema de refer√™ncia geogr√°fica</span></a>
<a class="sourceLine" id="cb98-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_crs</span>(shp_brazil) &lt;-<span class="st"> </span><span class="dv">4326</span></a></code></pre></div>
<pre><code>## Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform
## for that</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1">  sf<span class="op">::</span><span class="kw">st_crs</span>(shp_brazil)</a></code></pre></div>
<pre><code>## Coordinate Reference System:
##   EPSG: 4326 
##   proj4string: &quot;+proj=longlat +datum=WGS84 +no_defs&quot;</code></pre>
<p>Agora que definimos nosso <strong>ESPG</strong>, vamos visualizar as coordenadas geogr√°ficas:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1">  <span class="co"># Visualiza√ß√£o das tr√™s primeiras localiza√ß√µes</span></a>
<a class="sourceLine" id="cb102-2" data-line-number="2">  <span class="kw">head</span>(shp_brazil<span class="op">$</span>geometry, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## Geometry set for 3 features 
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.99094 ymin: -11.14449 xmax: -35.15167 ymax: 4.437122
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs</code></pre>
<pre><code>## MULTIPOLYGON (((-73.80098 -7.111453, -73.74084 ...</code></pre>
<pre><code>## MULTIPOLYGON (((-36.39119 -10.50082, -36.39864 ...</code></pre>
<pre><code>## MULTIPOLYGON (((-51.3738 -0.3705301, -51.37337 ...</code></pre>
<p>√â poss√≠vel observar que as coordenadas est√£o em graus, no entanto, e se quisermos trabalhar com metros? √â s√≥ fazer a convers√£o?</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1">    <span class="co"># Convers√£o para metros usando WGS 84 na zona 23S</span></a>
<a class="sourceLine" id="cb107-2" data-line-number="2">    sf<span class="op">::</span><span class="kw">st_crs</span>(shp_brazil) &lt;-<span class="st"> </span><span class="dv">32723</span></a></code></pre></div>
<pre><code>## Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform
## for that</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1">    <span class="kw">head</span>(shp_brazil<span class="op">$</span>geometry, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## Geometry set for 3 features 
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.99094 ymin: -11.14449 xmax: -35.15167 ymax: 4.437122
## epsg (SRID):    32723
## proj4string:    +proj=utm +zone=23 +south +datum=WGS84 +units=m +no_defs</code></pre>
<pre><code>## MULTIPOLYGON (((-73.80098 -7.111453, -73.74084 ...</code></pre>
<pre><code>## MULTIPOLYGON (((-36.39119 -10.50082, -36.39864 ...</code></pre>
<pre><code>## MULTIPOLYGON (((-51.3738 -0.3705301, -51.37337 ...</code></pre>
<p>O m√©todo de convers√£o n√£o faz transforma√ß√£o das coordenadas geogr√°ficas. Para fazer a transforma√ß√£o, podemos usar o m√©todod <code>st_transform</code>:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1">  <span class="co"># Convers√£o do sistema de refer√™ncia geogr√°fica</span></a>
<a class="sourceLine" id="cb114-2" data-line-number="2">  sf<span class="op">::</span><span class="kw">st_crs</span>(shp_brazil) &lt;-<span class="st"> </span><span class="dv">4326</span></a></code></pre></div>
<pre><code>## Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform
## for that</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1">  <span class="co"># Transforma√ß√£o para metros usando WGS 84 na zona 23S</span></a>
<a class="sourceLine" id="cb116-2" data-line-number="2">  shp_brazil &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_transform</span>(shp_brazil, <span class="dv">32723</span>)</a>
<a class="sourceLine" id="cb116-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb116-4" data-line-number="4">  <span class="kw">head</span>(shp_brazil<span class="op">$</span>geometry, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## Geometry set for 3 features 
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -2839595 ymin: 8649068 xmax: 1587862 ymax: 10493640
## epsg (SRID):    32723
## proj4string:    +proj=utm +zone=23 +south +datum=WGS84 +units=m +no_defs</code></pre>
<pre><code>## MULTIPOLYGON (((-2819509 9103452, -2811689 9099...</code></pre>
<pre><code>## MULTIPOLYGON (((1445354 8826197, 1444540 882654...</code></pre>
<pre><code>## MULTIPOLYGON (((-210707.1 9958789, -210659.5 99...</code></pre>
</div>
<div id="materiais-recomendados" class="section level3">
<h3><span class="header-section-number">2.2.6</span> Materiais recomendados</h3>
<p><a href="!https://github.com/rafaeldcsantos/CAP-394">Rafael Santos</a></p>
<p><a href="https://github.com/gqueiroz/cap349">Disciplina de Banco de Dados Geogr√°fico - CAP349</a></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introducao.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="python.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
